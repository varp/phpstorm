<application>
  <component name="VimSettings">
    <state version="4" enabled="false" />
    <globalmarks />
    <filemarks>
      <file name="$USER_HOME$/.ideavimrc" timestamp="1535616105279">
        <mark key="[" line="0" column="0" />
        <mark key="]" line="0" column="0" />
        <mark key="^" line="5" column="11" />
        <mark key="." line="0" column="0" />
      </file>
      <file name="/Dummy.txt" timestamp="1535585803993">
        <mark key="[" line="0" column="0" />
      </file>
      <file name="$USER_HOME$/code/lawyer/frontend/views/document/common/sign.php" timestamp="1535548110820">
        <mark key="'" line="52" column="0" />
      </file>
      <file name="$USER_HOME$/code/lawyer/frontend/resources/js/taxsign/src/alert.js" timestamp="1535618299498">
        <mark key="'" line="0" column="15" />
        <mark key="[" line="0" column="14" />
        <mark key="]" line="0" column="13" />
        <mark key="." line="0" column="13" />
        <mark key="^" line="0" column="13" />
      </file>
      <file name="$USER_HOME$/code/lawyer/frontend/resources/js/taxsign/src/logger.js" timestamp="1535660374907">
        <mark key="'" line="7" column="0" />
        <mark key="[" line="36" column="19" />
        <mark key="]" line="37" column="50" />
        <mark key="^" line="37" column="50" />
        <mark key="." line="37" column="50" />
      </file>
      <file name="$APPLICATION_CONFIG_DIR$/scratches/scratch.js" timestamp="1535544756785">
        <mark key="[" line="2" column="0" />
        <mark key="]" line="2" column="7" />
        <mark key="^" line="2" column="7" />
        <mark key="." line="2" column="7" />
      </file>
      <file name="$USER_HOME$/code/lawyer/frontend/resources/js/taxsign/src/info.js" timestamp="1535658492900">
        <mark key="'" line="21" column="0" />
      </file>
      <file name="$USER_HOME$/code/lawyer/.gitignore" timestamp="1535571961365">
        <mark key="'" line="21" column="0" />
      </file>
      <file name="$USER_HOME$/code/lawyer/frontend/web/js/sign.js" timestamp="1535616091216">
        <mark key="'" line="0" column="0" />
        <mark key="[" line="138" column="37" />
        <mark key="]" line="138" column="36" />
        <mark key="^" line="138" column="36" />
        <mark key="." line="138" column="36" />
      </file>
      <file name="$USER_HOME$/code/lawyer/frontend/resources/js/taxsign/webpack.config.js" timestamp="1535660529795">
        <mark key="'" line="22" column="12" />
        <mark key="[" line="6" column="28" />
        <mark key="]" line="6" column="27" />
        <mark key="." line="6" column="27" />
        <mark key="^" line="6" column="27" />
      </file>
      <file name="$USER_HOME$/code/lawyer/common/components/converter/PdfConverter.php" timestamp="1535547257048">
        <mark key="'" line="36" column="4" />
      </file>
      <file name="$USER_HOME$/code/lawyer/frontend/controllers/document/NewBaseController.php" timestamp="1535574243446">
        <mark key="'" line="765" column="0" />
      </file>
      <file name="$USER_HOME$/code/lawyer/vendor/yiisoft/yii2/base/Application.php" timestamp="1535544164534">
        <mark key="'" line="230" column="10" />
      </file>
      <file name="$USER_HOME$/code/lawyer/frontend/resources/js/taxsign/src/container.js" timestamp="1535660729687">
        <mark key="'" line="120" column="43" />
        <mark key="[" line="120" column="39" />
        <mark key="]" line="120" column="47" />
        <mark key="." line="120" column="47" />
        <mark key="^" line="120" column="47" />
      </file>
      <file name="$USER_HOME$/code/lawyer/frontend/resources/js/taxsign/src/index.js" timestamp="1535659826459">
        <mark key="[" line="6" column="0" />
        <mark key="]" line="6" column="0" />
        <mark key="." line="6" column="0" />
      </file>
      <file name="$APPLICATION_CONFIG_DIR$/scratches/scratch_1.js" timestamp="1535561353181">
        <mark key="[" line="1" column="52" />
        <mark key="]" line="1" column="52" />
        <mark key="^" line="1" column="52" />
        <mark key="." line="1" column="52" />
      </file>
    </filemarks>
    <jumps>
      <jump line="256" column="0" filename="$USER_HOME$/code/lawyer/frontend/web/js/sign.js" />
      <jump line="258" column="0" filename="$USER_HOME$/code/lawyer/frontend/web/js/sign.js" />
      <jump line="260" column="0" filename="$USER_HOME$/code/lawyer/frontend/web/js/sign.js" />
      <jump line="270" column="0" filename="$USER_HOME$/code/lawyer/frontend/web/js/sign.js" />
      <jump line="277" column="0" filename="$USER_HOME$/code/lawyer/frontend/web/js/sign.js" />
      <jump line="281" column="0" filename="$USER_HOME$/code/lawyer/frontend/web/js/sign.js" />
      <jump line="405" column="10" filename="$USER_HOME$/code/lawyer/frontend/web/js/sign.js" />
      <jump line="390" column="0" filename="$USER_HOME$/code/lawyer/frontend/web/js/sign.js" />
      <jump line="400" column="0" filename="$USER_HOME$/code/lawyer/frontend/web/js/sign.js" />
      <jump line="402" column="0" filename="$USER_HOME$/code/lawyer/frontend/web/js/sign.js" />
      <jump line="404" column="0" filename="$USER_HOME$/code/lawyer/frontend/web/js/sign.js" />
      <jump line="406" column="0" filename="$USER_HOME$/code/lawyer/frontend/web/js/sign.js" />
      <jump line="496" column="0" filename="$USER_HOME$/code/lawyer/frontend/web/js/sign.js" />
      <jump line="525" column="0" filename="$USER_HOME$/code/lawyer/frontend/web/js/sign.js" />
      <jump line="528" column="0" filename="$USER_HOME$/code/lawyer/frontend/web/js/sign.js" />
      <jump line="526" column="0" filename="$USER_HOME$/code/lawyer/frontend/web/js/sign.js" />
      <jump line="520" column="0" filename="$USER_HOME$/code/lawyer/frontend/web/js/sign.js" />
      <jump line="516" column="0" filename="$USER_HOME$/code/lawyer/frontend/web/js/sign.js" />
      <jump line="511" column="0" filename="$USER_HOME$/code/lawyer/frontend/web/js/sign.js" />
      <jump line="508" column="0" filename="$USER_HOME$/code/lawyer/frontend/web/js/sign.js" />
      <jump line="501" column="0" filename="$USER_HOME$/code/lawyer/frontend/web/js/sign.js" />
      <jump line="499" column="0" filename="$USER_HOME$/code/lawyer/frontend/web/js/sign.js" />
      <jump line="497" column="0" filename="$USER_HOME$/code/lawyer/frontend/web/js/sign.js" />
      <jump line="490" column="0" filename="$USER_HOME$/code/lawyer/frontend/web/js/sign.js" />
      <jump line="484" column="0" filename="$USER_HOME$/code/lawyer/frontend/web/js/sign.js" />
      <jump line="481" column="0" filename="$USER_HOME$/code/lawyer/frontend/web/js/sign.js" />
      <jump line="462" column="0" filename="$USER_HOME$/code/lawyer/frontend/web/js/sign.js" />
      <jump line="453" column="0" filename="$USER_HOME$/code/lawyer/frontend/web/js/sign.js" />
      <jump line="447" column="0" filename="$USER_HOME$/code/lawyer/frontend/web/js/sign.js" />
      <jump line="439" column="0" filename="$USER_HOME$/code/lawyer/frontend/web/js/sign.js" />
      <jump line="436" column="0" filename="$USER_HOME$/code/lawyer/frontend/web/js/sign.js" />
      <jump line="408" column="0" filename="$USER_HOME$/code/lawyer/frontend/web/js/sign.js" />
      <jump line="410" column="0" filename="$USER_HOME$/code/lawyer/frontend/web/js/sign.js" />
      <jump line="413" column="0" filename="$USER_HOME$/code/lawyer/frontend/web/js/sign.js" />
      <jump line="417" column="0" filename="$USER_HOME$/code/lawyer/frontend/web/js/sign.js" />
      <jump line="419" column="0" filename="$USER_HOME$/code/lawyer/frontend/web/js/sign.js" />
      <jump line="425" column="0" filename="$USER_HOME$/code/lawyer/frontend/web/js/sign.js" />
      <jump line="435" column="0" filename="$USER_HOME$/code/lawyer/frontend/web/js/sign.js" />
      <jump line="438" column="0" filename="$USER_HOME$/code/lawyer/frontend/web/js/sign.js" />
      <jump line="446" column="0" filename="$USER_HOME$/code/lawyer/frontend/web/js/sign.js" />
      <jump line="450" column="0" filename="$USER_HOME$/code/lawyer/frontend/web/js/sign.js" />
      <jump line="452" column="0" filename="$USER_HOME$/code/lawyer/frontend/web/js/sign.js" />
      <jump line="455" column="0" filename="$USER_HOME$/code/lawyer/frontend/web/js/sign.js" />
      <jump line="459" column="0" filename="$USER_HOME$/code/lawyer/frontend/web/js/sign.js" />
      <jump line="464" column="0" filename="$USER_HOME$/code/lawyer/frontend/web/js/sign.js" />
      <jump line="466" column="0" filename="$USER_HOME$/code/lawyer/frontend/web/js/sign.js" />
      <jump line="489" column="0" filename="$USER_HOME$/code/lawyer/frontend/web/js/sign.js" />
      <jump line="468" column="0" filename="$USER_HOME$/code/lawyer/frontend/web/js/sign.js" />
      <jump line="470" column="0" filename="$USER_HOME$/code/lawyer/frontend/web/js/sign.js" />
      <jump line="472" column="0" filename="$USER_HOME$/code/lawyer/frontend/web/js/sign.js" />
      <jump line="476" column="0" filename="$USER_HOME$/code/lawyer/frontend/web/js/sign.js" />
      <jump line="483" column="0" filename="$USER_HOME$/code/lawyer/frontend/web/js/sign.js" />
      <jump line="480" column="0" filename="$USER_HOME$/code/lawyer/frontend/web/js/sign.js" />
      <jump line="478" column="0" filename="$USER_HOME$/code/lawyer/frontend/web/js/sign.js" />
      <jump line="192" column="28" filename="$USER_HOME$/code/lawyer/frontend/web/js/sign.js" />
      <jump line="313" column="31" filename="$USER_HOME$/code/lawyer/frontend/web/js/sign.js" />
      <jump line="236" column="51" filename="$USER_HOME$/code/lawyer/frontend/web/js/sign.js" />
      <jump line="235" column="41" filename="$USER_HOME$/code/lawyer/frontend/web/js/sign.js" />
      <jump line="257" column="77" filename="$USER_HOME$/code/lawyer/frontend/web/js/sign.js" />
      <jump line="223" column="16" filename="$USER_HOME$/code/lawyer/frontend/web/js/sign.js" />
      <jump line="249" column="34" filename="$USER_HOME$/code/lawyer/frontend/web/js/sign.js" />
      <jump line="250" column="34" filename="$USER_HOME$/code/lawyer/frontend/web/js/sign.js" />
      <jump line="248" column="32" filename="$USER_HOME$/code/lawyer/frontend/web/js/sign.js" />
      <jump line="134" column="30" filename="$USER_HOME$/code/lawyer/frontend/web/js/sign.js" />
      <jump line="143" column="48" filename="$USER_HOME$/code/lawyer/frontend/web/js/sign.js" />
      <jump line="142" column="16" filename="$USER_HOME$/code/lawyer/frontend/web/js/sign.js" />
      <jump line="141" column="0" filename="$USER_HOME$/code/lawyer/frontend/web/js/sign.js" />
      <jump line="179" column="8" filename="$USER_HOME$/code/lawyer/frontend/web/js/sign.js" />
      <jump line="193" column="32" filename="$USER_HOME$/code/lawyer/frontend/web/js/sign.js" />
      <jump line="195" column="48" filename="$USER_HOME$/code/lawyer/frontend/web/js/sign.js" />
      <jump line="199" column="28" filename="$USER_HOME$/code/lawyer/frontend/web/js/sign.js" />
      <jump line="232" column="32" filename="$USER_HOME$/code/lawyer/frontend/web/js/sign.js" />
      <jump line="139" column="29" filename="$USER_HOME$/code/lawyer/frontend/web/js/sign.js" />
      <jump line="4" column="10" filename="$USER_HOME$/code/lawyer/frontend/web/js/sign.js" />
      <jump line="430" column="57" filename="$USER_HOME$/code/lawyer/frontend/web/js/sign.js" />
      <jump line="786" column="16" filename="$USER_HOME$/code/lawyer/frontend/web/js/sign.js" />
      <jump line="797" column="26" filename="$USER_HOME$/code/lawyer/frontend/web/js/sign.js" />
      <jump line="426" column="22" filename="$USER_HOME$/code/lawyer/frontend/web/js/sign.js" />
      <jump line="434" column="40" filename="$USER_HOME$/code/lawyer/frontend/web/js/sign.js" />
      <jump line="440" column="35" filename="$USER_HOME$/code/lawyer/frontend/web/js/sign.js" />
      <jump line="442" column="39" filename="$USER_HOME$/code/lawyer/frontend/web/js/sign.js" />
      <jump line="443" column="37" filename="$USER_HOME$/code/lawyer/frontend/web/js/sign.js" />
      <jump line="444" column="35" filename="$USER_HOME$/code/lawyer/frontend/web/js/sign.js" />
      <jump line="451" column="69" filename="$USER_HOME$/code/lawyer/frontend/web/js/sign.js" />
      <jump line="6" column="48" filename="$USER_HOME$/code/lawyer/frontend/web/js/sign.js" />
      <jump line="0" column="0" filename="$USER_HOME$/code/lawyer/frontend/web/js/sign.js" />
      <jump line="34" column="3" filename="$USER_HOME$/code/lawyer/frontend/resources/js/taxsign/src/alert.js" />
      <jump line="32" column="5" filename="$USER_HOME$/code/lawyer/frontend/resources/js/taxsign/src/alert.js" />
      <jump line="0" column="15" filename="$USER_HOME$/code/lawyer/frontend/resources/js/taxsign/src/alert.js" />
      <jump line="45" column="4" filename="$USER_HOME$/code/lawyer/frontend/resources/js/taxsign/src/info.js" />
      <jump line="44" column="0" filename="$USER_HOME$/code/lawyer/frontend/resources/js/taxsign/src/info.js" />
      <jump line="38" column="0" filename="$USER_HOME$/code/lawyer/frontend/resources/js/taxsign/src/info.js" />
      <jump line="31" column="0" filename="$USER_HOME$/code/lawyer/frontend/resources/js/taxsign/src/info.js" />
      <jump line="23" column="0" filename="$USER_HOME$/code/lawyer/frontend/resources/js/taxsign/src/info.js" />
      <jump line="15" column="0" filename="$USER_HOME$/code/lawyer/frontend/resources/js/taxsign/src/info.js" />
      <jump line="21" column="0" filename="$USER_HOME$/code/lawyer/frontend/resources/js/taxsign/src/info.js" />
      <jump line="20" column="12" filename="$USER_HOME$/code/lawyer/frontend/resources/js/taxsign/webpack.config.js" />
      <jump line="33" column="33" filename="$USER_HOME$/code/lawyer/frontend/resources/js/taxsign/src/logger.js" />
      <jump line="7" column="0" filename="$USER_HOME$/code/lawyer/frontend/resources/js/taxsign/src/logger.js" />
      <jump line="120" column="43" filename="$USER_HOME$/code/lawyer/frontend/resources/js/taxsign/src/container.js" />
    </jumps>
    <registers>
      <register name="&quot;" type="4">
        <text>exception</text>
      </register>
      <register name="-" type="4">
        <text>exception</text>
      </register>
      <register name="/" type="4">
        <text>VERSION</text>
      </register>
      <register name="0" type="4">
        <text>_this.sentryLogger.exception</text>
      </register>
      <register name="1" type="4">
        <text>setTags(
            {
                'version': VERSION
            }
        )</text>
      </register>
      <register name="2" type="2">
        <text encoding="base64">Y29uc3QgVkVSU0lPTiA9ICIxLjAuMC13ZWJwYWNrIjsK</text>
      </register>
      <register name="3" type="4">
        <text encoding="base64">IjsK</text>
      </register>
      <register name="4" type="2">
        <text encoding="base64">Cg==</text>
      </register>
      <register name="5" type="2">
        <text encoding="base64">bGV0IFZFUlNJT04gPSAiMS4wLjAtd2VicGFjayI7Cg==</text>
      </register>
      <register name="6" type="2">
        <text encoding="base64">ICAgIGNsYXNzIExvZ2dlciBleHRlbmRzIENvbXBvbmVudCB7CiAgICAgICAgbG9nKG1zZykgewogICAgICAgICAgICAkKHRoaXMuZG9tLmNvbnRhaW5lcikudGV4dChtc2cpOwogICAgICAgIH0KICAgIH0KCiAgICBjbGFzcyBDb25zb2xlTG9nZ2VyIHsKICAgICAgICBjb25zdHJ1Y3RvcihkZWJ1ZykgewogICAgICAgICAgICB0aGlzLmRlYnVnTW9kZSA9IGRlYnVnOwogICAgICAgIH0KCiAgICAgICAgbG9nKG1zZykgewogICAgICAgICAgICBjb25zb2xlLmxvZyhtc2cpOwogICAgICAgIH0KCiAgICAgICAgZGVidWcobXNnKSB7CiAgICAgICAgICAgIGlmICh0aGlzLmRlYnVnTW9kZSkgewogICAgICAgICAgICAgICAgY29uc29sZS5sb2cobXNnKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KCgogICAgY2xhc3MgRmlsZUlucHV0IGV4dGVuZHMgQ29tcG9uZW50IHsKICAgICAgICBjb25zdHJ1Y3Rvcihjb250YWluZXIsIHJvb3QsIHNjb3BlcikgewogICAgICAgICAgICBzdXBlcihjb250YWluZXIsIHJvb3QpOwoKICAgICAgICAgICAgbGV0IF90aGlzID0gdGhpczsKCiAgICAgICAgICAgIHRoaXMuc2NvcGVyID0gc2NvcGVyOwogICAgICAgICAgICB0aGlzLnByb3BzLnRvZ2dsZWQgPSBmYWxzZTsKICAgICAgICAgICAgdGhpcy5wcm9wcy5pbml0aWF0ZWQgPSBmYWxzZTsKICAgICAgICAgICAgdGhpcy5maWxlSW5wdXRJZCA9ICJhZGRpdGlvbmFsLWZpbGUtIiArIERhdGUubm93KCk7CiAgICAgICAgICAgIHRoaXMuZG9jdW1lbnRDb2RlID0gJCgnLmZpZWxkW2RhdGEtdGVtcGxhdGUtaWQ9JyArIHRoaXMuc2NvcGVyICsgIl0gLmRvYy1jb2RlLmFkZC1hdHRhY2giKS50ZXh0KCk7CiAgICAgICAgICAgIHRoaXMuZG9tLiRmaWxlSW5wdXQgPSAiIyIgKyB0aGlzLmZpbGVJbnB1dElkOwogICAgICAgICAgICB0aGlzLmRvbS4kcHJldmlldyA9IHRoaXMuc2NvcGVTZWxlY29yKCIuanMtZ2V0LXByZXZpZXciKTsKICAgICAgICAgICAgdGhpcy5kb20uJGNvbnRhaW5lciA9IHRoaXMuc2NvcGVTZWxlY29yKHRoaXMuZG9tLmNvbnRhaW5lcik7CgogICAgICAgICAgICAkKHRoaXMuZG9tLiRjb250YWluZXIpLm9uKCJjbGljayIsIGZ1bmN0aW9uIChldmVudCkgewogICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgICAgICAgIGlmIChfdGhpcy5wcm9wcy50b2dnbGVkKSB7CiAgICAgICAgICAgICAgICAgICAgJChfdGhpcy5kb20uJGNvbnRhaW5lcikudGV4dCgi0J/RgNC40LrRgNC10L/QuNGC0Ywg0YHQvtCx0YHRgtCy0LXQvdC90YvQuSIpOwogICAgICAgICAgICAgICAgICAgICQoX3RoaXMuZG9tLiRwcmV2aWV3KS5zaG93KCk7CiAgICAgICAgICAgICAgICAgICAgJChfdGhpcy5kb20uJGZpbGVJbnB1dCkucGFyZW50cygiLmZpbGUtaW5wdXQiKS5oaWRlKCk7CgogICAgICAgICAgICAgICAgICAgICQoX3RoaXMucm9vdCkuY2hpbGRyZW4oIjp2aXNpYmxlIikucmVtb3ZlQ2xhc3MoImRpc3BsYXktdGFibGUtY2VsbC10by1kaXNwbGF5LWJsb2NrIik7CgogICAgICAgICAgICAgICAgICAgIF90aGlzLnByb3BzLnRvZ2dsZWQgPSBmYWxzZTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CgogICAgICAgICAgICAgICAgICAgIGlmIChfdGhpcy5wcm9wcy5pbml0aWF0ZWQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgJChfdGhpcy5kb20uJHByZXZpZXcpLmhpZGUoKTsKICAgICAgICAgICAgICAgICAgICAgICAgJChfdGhpcy5kb20uJGZpbGVJbnB1dCkucGFyZW50cygiLmZpbGUtaW5wdXQiKS5zaG93KCk7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgJChfdGhpcy5kb20uJHByZXZpZXcpLmhpZGUoKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICQoX3RoaXMucm9vdCkucHJlcGVuZCgnPGlucHV0IHR5cGU9ImZpbGUiIGNsYXNzPSJoaWRkZW4iIGlkPSInICsgX3RoaXMuZmlsZUlucHV0SWQgKyAnIj4nKTsKICAgICAgICAgICAgICAgICAgICAgICAgJChfdGhpcy5kb20uJGZpbGVJbnB1dCkuZmlsZWlucHV0KHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhbmd1YWdlOiAncnUnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFpbkNsYXNzOiAnYXR0YWNoLWFkZCcsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG93UHJldmlldzogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG93Q2FuY2VsOiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3dVcGxvYWQ6IGZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvd1JlbW92ZTogZmFsc2UsCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJvd3NlQ2xhc3M6ICdidXR0b24gc2ItYnV0dG9uJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1zZ1BsYWNlaG9sZGVyOiAn0JTQvtC60YPQvNC10L3RgiDQsiDRhNC+0YDQvNCw0YLQtSBQREYnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVtb3ZlTGFiZWw6ICcnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBsb2FkTGFiZWw6ICcnLAoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsbG93ZWRGaWxlRXh0ZW5zaW9uczogWydwZGYnXSwKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicm93c2VJY29uOiAnPGkgY2xhc3M9ImZhIGZhLWZvbGRlci1vcGVuIj48L2k+JywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyb3dzZUxhYmVsOiAn0JLRi9Cx0YDQsNGC0YwnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FwdGlvbkljb246ICcnLAoKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cGxvYWRVcmw6ICIvZG9jdW1lbnQvIiArIEFQUC5zaWduLnNlcnZpY2UgKyAiL3VwbG9hZC1zZWNvbmQtcGhhc2UtZG9jcz9kb2N1bWVudElkPSIgKyBBUFAuc2lnbi5kb2N1bWVudElkLAoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwbG9hZEV4dHJhRGF0YTogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50Q29kZTogX3RoaXMuZG9jdW1lbnRDb2RlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgJChfdGhpcy5kb20uJGNvbnRhaW5lcikudGV4dCgi0JjRgdC/0L7Qu9GM0LfQvtCy0LDRgtGMINGB0YLQsNC90LTQsNGA0YLQvdGL0LkiKTsKICAgICAgICAgICAgICAgICAgICAkKF90aGlzLnJvb3QpLmNoaWxkcmVuKCI6dmlzaWJsZSIpLmFkZENsYXNzKCJkaXNwbGF5LXRhYmxlLWNlbGwtdG8tZGlzcGxheS1ibG9jayIpOwoKICAgICAgICAgICAgICAgICAgICBfdGhpcy5wcm9wcy50b2dnbGVkID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICBfdGhpcy5wcm9wcy5pbml0aWF0ZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICB9CgogICAgY2xhc3MgUGx1Z2luIGV4dGVuZHMgQ29tcG9uZW50IHsKCiAgICAgICAgY29uc3RydWN0b3Ioc2VsZWN0b3IpIHsKCiAgICAgICAgICAgIHN1cGVyKHNlbGVjdG9yLCAnJyk7CgogICAgICAgICAgICB0aGlzLmxvZ2dlciA9IG5ldyBMb2dnZXIoIi50YXgtbG9nIik7CiAgICAgICAgICAgIHRoaXMuYWxlcnQgPSBuZXcgQWxlcnQoIiNyZXFzIik7CiAgICAgICAgICAgIHRoaXMuJHNpZ25CdG5zID0gIiNzaWduLWJ0biI7CgogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgdGhpcy5jYW5Bc3luYyA9ICEhY2FkZXNwbHVnaW4uQ3JlYXRlT2JqZWN0QXN5bmM7CiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgIHRoaXMuY2FuQXN5bmMgPSBmYWxzZTsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJjYWRlc3BsdWdpbiBpcyBub3QgaW5zdGFsbGVkISEhIik7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KCgogICAgICAgICAgICBsZXQgX3RoaXMgPSB0aGlzOwogICAgICAgICAgICAvLyB3YWl0IGZvciBjYWRlc3BsdWdpbiB0byBiZSBsb2FkZWQKICAgICAgICAgICAgbGV0IGNhblByb21pc2UgPSAhIXdpbmRvdy5Qcm9taXNlOwogICAgICAgICAgICBpZiAoY2FuUHJvbWlzZSkgewogICAgICAgICAgICAgICAgY2FkZXNwbHVnaW4udGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnJ1bigpOwogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMubG9nZ2VyLmxvZyhlcnJvcik7CiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmFsZXJ0Ll9zaG93SW5zdGFsbENhZGVzUGx1Z2luKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICQoX3RoaXMuJHNpZ25CdG5zKS5wcm9wKCJkaXNhYmxlZCIsIHRydWUpLmFkZENsYXNzKCJkaXNhYmxlZCIpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigibWVzc2FnZSIsIGZ1bmN0aW9uIChldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXZlbnQuZGF0YSA9PT0gImNhZGVzcGx1Z2luX2xvYWRlZCIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnJ1bigpOwogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGV2ZW50LmRhdGEgPT09ICJjYWRlc3BsdWdpbl9sb2FkX2Vycm9yIikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMubG9nZ2VyLmxvZyhlcnJvcik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5hbGVydC5fc2hvd0luc3RhbGxDYWRlc1BsdWdpbigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgJChfdGhpcy4kc2lnbkJ0bnMpLnByb3AoImRpc2FibGVkIiwgdHJ1ZSkuYWRkQ2xhc3MoImRpc2FibGVkIik7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGZhbHNlKTsKICAgICAgICAgICAgICAgIHdpbmRvdy5wb3N0TWVzc2FnZSgiY2FkZXNwbHVnaW5fZWNob19yZXF1ZXN0IiwgIioiKTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgX2dldFN0b3JlQ2VydGlmaWNhdGVzKCkgewogICAgICAgICAgICBsZXQgX3RoaXMgPSB0aGlzOwogICAgICAgICAgICBpZiAodGhpcy5jYW5Bc3luYykgewogICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgICAgICAgICAgICAgICBjYWRlc3BsdWdpbi5hc3luY19zcGF3bihmdW5jdGlvbiogKGFyZ3MpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgb1N0b3JlID0geWllbGQgY2FkZXNwbHVnaW4uQ3JlYXRlT2JqZWN0QXN5bmMoIkNBZEVTQ09NLlN0b3JlIik7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgeWllbGQgb1N0b3JlLk9wZW4oLypjYWRlc3BsdWdpbi5DQURFU0NPTV9DVVJSRU5UX1VTRVJfU1RPUkUsIGNhZGVzcGx1Z2luLkNBUElDT01fTVlfU1RPUkUqLyk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHN0b3JlQ2VydHMgPSB5aWVsZCBvU3RvcmUuQ2VydGlmaWNhdGVzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHN0b3JlQ2Vyc3RDbnQgPSB5aWVsZCBzdG9yZUNlcnRzLkNvdW50OwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZGVidWcoeWllbGQgb1N0b3JlLkxvY2F0aW9uKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgaSwgY2VydCwgY2VydHMgPSBbXTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGkgPSAxOyBpIDw9IHN0b3JlQ2Vyc3RDbnQ7IGkrKykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNlcnQgPSB5aWVsZCBzdG9yZUNlcnRzLkl0ZW0oaSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2VydHMucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzc3VlcjogeWllbGQgY2VydC5Jc3N1ZXJOYW1lLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJqZWN0OiB5aWVsZCBjZXJ0LlN1YmplY3ROYW1lLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbjogeWllbGQgY2VydC5TZXJpYWxOdW1iZXIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRodW1icHJpbnQ6IHlpZWxkIGNlcnQuVGh1bWJwcmludCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogeWllbGQgY2VydC5HZXRJbmZvKGNhZGVzcGx1Z2luLkNBUElDT01fQ0VSVF9JTkZPX1NVQkpFQ1RfU0lNUExFX05BTUUpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWxpZDogeWllbGQgY2VydC5WYWxpZFRvRGF0ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNWYWxpZDogeWllbGQgY2VydC5Jc1ZhbGlkCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5kZWJ1ZyhjZXJ0cyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKGNlcnRzKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuYWxlcnQuX3Nob3dJbnN0YWxsUmVxdWlyZW1lbnRzKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWplY3QoZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9LCByZXNvbHZlLCByZWplY3QpOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnVE9ETzogdHJhdmVyc2VTdG9yZXMoKTogbmVlZCBpbXBsZW1lbnQnKTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgc2lnbkRhdGEoZGF0YVRvU2lnbiwgdGh1bWJwcmludCkgewogICAgICAgICAgICBpZiAodGhpcy5jYW5Bc3luYykgewogICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgICAgICAgICAgICAgICBjYWRlc3BsdWdpbi5hc3luY19zcGF3bihmdW5jdGlvbiogKGFyZ3MpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBvU3RvcmUgPSB5aWVsZCBjYWRlc3BsdWdpbi5DcmVhdGVPYmplY3RBc3luYygiQ0FkRVNDT00uU3RvcmUiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHlpZWxkIG9TdG9yZS5PcGVuKCk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHN0b3JlQ2VydHMgPSB5aWVsZCBvU3RvcmUuQ2VydGlmaWNhdGVzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGZvdW5kQ2VydHMgPSB5aWVsZCBzdG9yZUNlcnRzLkZpbmQoY2FkZXNwbHVnaW4uQ0FQSUNPTV9DRVJUSUZJQ0FURV9GSU5EX1NIQTFfSEFTSCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHVtYnByaW50LCBmYWxzZSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGZvdW5kQ250ID0geWllbGQgZm91bmRDZXJ0cy5Db3VudDsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZm91bmRDbnQgPT09IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWplY3QoInNpZ25EYXRhKCk6IFNvbWV0aGluZyBnb2VzIHdyb25nIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBmaXJzdENlcnQgPSB5aWVsZCBmb3VuZENlcnRzLkl0ZW0oMSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG9TaWduZXIgPSB5aWVsZCBjYWRlc3BsdWdpbi5DcmVhdGVPYmplY3RBc3luYygiQ0FkRVNDT00uQ1BTaWduZXIiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHlpZWxkIG9TaWduZXIucHJvcHNldF9DZXJ0aWZpY2F0ZShmaXJzdENlcnQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgeWllbGQgb1NpZ25lci5wcm9wc2V0X09wdGlvbnMoMik7IC8vQ0FQSUNPTV9DRVJUSUZJQ0FURV9JTkNMVURFX1dIT0xFX0NIQUlOCgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBvU2lnbmVkRGF0YSA9IHlpZWxkIGNhZGVzcGx1Z2luLkNyZWF0ZU9iamVjdEFzeW5jKCJDQWRFU0NPTS5DYWRlc1NpZ25lZERhdGEiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHlpZWxkIG9TaWduZWREYXRhLnByb3BzZXRfQ29udGVudEVuY29kaW5nKDEpOyAvL0NBREVTQ09NX0JBU0U2NF9UT19CSU5BUlkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHlpZWxkIG9TaWduZWREYXRhLnByb3BzZXRfQ29udGVudChkYXRhVG9TaWduKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgc1NpZ25lZE1lc3NhZ2UgPSB5aWVsZCBvU2lnbmVkRGF0YS5TaWduQ2FkZXMob1NpZ25lciwgY2FkZXNwbHVnaW4uQ0FERVNDT01fQ0FERVNfQkVTLCB0cnVlKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB5aWVsZCBvU3RvcmUuQ2xvc2UoKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHNTaWduZWRNZXNzYWdlKTsgLy8gcGtjczcgY29udGFpbmVyCiAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCLQmNGB0LrQu9GO0YfQtdC90LjQtSDQsiDQv9C70LDQs9C40L3QtSIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coY2FkZXNwbHVnaW4uSlNNb2R1bGVWZXJzaW9uKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGNhZGVzcGx1Z2luLmdldExhc3RFcnJvcihlKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB5aWVsZCBjYWRlc3BsdWdpbi5SZWxlYXNlUGx1Z2luT2JqZWN0cygpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3NpZ25EYXRhIGlzIG9rJyk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgfSwgcmVzb2x2ZSwgcmVqZWN0LCBkYXRhVG9TaWduLCB0aHVtYnByaW50KTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1RPRE86IHNpZ25EYXRhKCk6IG5lZWQgdG8gYmUgaW1wbGVtZW50ZWQnKTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgX2V4dHJhY3RVc2VyTmFtZShzdWJqZWN0KSB7CiAgICAgICAgICAgIGxldCBwMVJlID0gbmV3IFJlZ0V4cCgiU049KFteLF0rKSIpLAogICAgICAgICAgICAgICAgcDJSZSA9IG5ldyBSZWdFeHAoIkc9KFteLF0rKSIpOwoKICAgICAgICAgICAgaWYgKHN1YmplY3QuaW5kZXhPZigiU049IikgPT09IC0xIHx8IHN1YmplY3QuaW5kZXhPZigiRz0iKSA9PT0gLTEpIHsKICAgICAgICAgICAgICAgIHJldHVybiAiIjsKICAgICAgICAgICAgfQoKCiAgICAgICAgICAgIGxldCBwYXJ0MSA9IHAxUmUuZXhlYyhzdWJqZWN0KTsKICAgICAgICAgICAgaWYgKHBhcnQxLmxlbmd0aCA+IDApIHBhcnQxID0gcGFydDFbMV07CgogICAgICAgICAgICBsZXQgcGFydDIgPSBwMlJlLmV4ZWMoc3ViamVjdCk7CiAgICAgICAgICAgIGlmIChwYXJ0Mi5sZW5ndGggPiAwKSBwYXJ0MiA9IHBhcnQyWzFdOwoKICAgICAgICAgICAgaWYgKHBhcnQxID09PSB1bmRlZmluZWQgfHwgcGFydDIgPT09IHVuZGVmaW5lZCkgcmV0dXJuICIiOwoKICAgICAgICAgICAgaWYgKHBhcnQyID09PSB1bmRlZmluZWQpIHJldHVybiBwYXJ0MTsKCiAgICAgICAgICAgIHJldHVybiBwYXJ0MSArICIgIiArIHBhcnQyOwogICAgICAgIH0KCiAgICAgICAgY2hlY2sodGh1bWJwcmludCkgewoKICAgICAgICAgICAgaWYgKHRoaXMuY2FuQXN5bmMpIHsKICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgICAgICAgICAgICAgICBjYWRlc3BsdWdpbi5hc3luY19zcGF3bihmdW5jdGlvbiogKGFyZ3MpIHsKCiAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGVycm9ycyA9IFtdOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG9TdG9yZSA9IHlpZWxkIGNhZGVzcGx1Z2luLkNyZWF0ZU9iamVjdEFzeW5jKCJDQWRFU0NPTS5TdG9yZSIpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgeWllbGQgb1N0b3JlLk9wZW4oLypjYWRlc3BsdWdpbi5DQURFU0NPTV9DVVJSRU5UX1VTRVJfU1RPUkUsIGNhZGVzcGx1Z2luLkNBUElDT01fTVlfU1RPUkUqLyk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgc3RvcmVDZXJ0cyA9IHlpZWxkIG9TdG9yZS5DZXJ0aWZpY2F0ZXM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBmb3VuZENlcnRzID0geWllbGQgc3RvcmVDZXJ0cy5GaW5kKGNhZGVzcGx1Z2luLkNBUElDT01fQ0VSVElGSUNBVEVfRklORF9TSEExX0hBU0gsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHVtYnByaW50LCB0cnVlKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBmb3VuZENudCA9IHlpZWxkIGZvdW5kQ2VydHMuQ291bnQ7CgogICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZm91bmRDbnQgPT09IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCfQndC1INC90LDQudC00LXQvCDRgdC10YDRgtC40YTQuNC60LDRgicpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeWllbGQgb1N0b3JlLkNsb3NlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvcnMucHVzaCgn0KHQtdGA0YLQuNGE0LjQutCw0YIg0L3QtSDQstCw0LvQuNC00L3Ri9C5Jyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWplY3QoZXJyb3JzKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGNlcnRUb0NoZWNrID0geWllbGQgZm91bmRDZXJ0cy5JdGVtKDEpOwoKCiAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBoYXNQcml2YXRlS2V5ID0geWllbGQgY2VydFRvQ2hlY2suSGFzUHJpdmF0ZUtleSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWhhc1ByaXZhdGVLZXkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9ycy5wdXNoKCfQndC1INC+0LHQvdCw0YDRg9C20LXQvSDQv9GA0LjQstCw0YLQvdGL0Lkg0LrQu9GO0Ycg0LTQu9GPINC/0L7QtNC/0LjRgdC4Jyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBrZXlVc2FnZSA9IHlpZWxkIGNlcnRUb0NoZWNrLktleVVzYWdlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBpc1ByZXNlbnQgPSB5aWVsZCBrZXlVc2FnZS5Jc1ByZXNlbnQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBpc0RpZ2l0YWxTaWduYXR1cmVFbmFibGVkID0geWllbGQga2V5VXNhZ2UuSXNEaWdpdGFsU2lnbmF0dXJlRW5hYmxlZDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGlzRGF0YUVuY2lwaGVybWVudEVuYWJsZWQgPSB5aWVsZCBrZXlVc2FnZS5Jc0RhdGFFbmNpcGhlcm1lbnRFbmFibGVkOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzUHJlc2VudCAmJiAhaXNEaWdpdGFsU2lnbmF0dXJlRW5hYmxlZCAmJiAhaXNEYXRhRW5jaXBoZXJtZW50RW5hYmxlZCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JzLnB1c2goJ9Ca0LvRjtGHINC90LXQu9GM0LfRjyDQuNGB0L/QvtC70YzQt9C+0LLQsNGC0Ywg0LTQu9GPINC/0L7QtNC/0LjRgdC4INC00LDQvdC90YvRhScpOwogICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICB5aWVsZCBvU3RvcmUuQ2xvc2UoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVycm9ycy5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWplY3QoZXJyb3JzKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoZXJyb3JzKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCLQmNGB0LrQu9GO0YfQtdC90LjQtSDQsiDQv9C70LDQs9C40L3QtSIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhjYWRlc3BsdWdpbi5KU01vZHVsZVZlcnNpb24pOwogICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhjYWRlc3BsdWdpbi5nZXRMYXN0RXJyb3IoZSkpOwogICAgICAgICAgICAgICAgICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHlpZWxkIGNhZGVzcGx1Z2luLlJlbGVhc2VQbHVnaW5PYmplY3RzKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdwbHVnaW4uY2hlY2sgaXMgb2snKTsKICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnVE9ETzogdHJhdmVyc2VTdG9yZXMoKTogbmVlZCBpbXBsZW1lbnQnKTsKICAgICAgICAgICAgfQoKICAgICAgICB9CgogICAgICAgIHJ1bigpIHsKICAgICAgICAgICAgbGV0IF90aGlzID0gdGhpczsKICAgICAgICAgICAgdGhpcy5fZ2V0U3RvcmVDZXJ0aWZpY2F0ZXMoKS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHsKICAgICAgICAgICAgICAgICAgICBsZXQgY29udGVudCA9ICIiOwoKICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0Lmxlbmd0aCA9PT0gMCkgX3RoaXMuYWxlcnQuX3Nob3dJbnN0YWxsUmVxdWlyZW1lbnRzKCk7CgogICAgICAgICAgICAgICAgICAgICQuZWFjaChyZXN1bHQsIGZ1bmN0aW9uIChpLCB2KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZVQ0s6IHRoaXMgaXMgd2hhdCBJIG11c3QgZGlkIChtaW5pIHRlbXBsYXRlIGVuZ2luZSkgYmVjYXVzZSBzb21lb25lIGZ1Y2tpbmcgaWRpb3QKICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVpbXBsZW1lbnRlZCBBY3RpdmVGaWVsZAogICAgICAgICAgICAgICAgICAgICAgICBsZXQgdGVtcGxhdGUgPSAnPG9wdGlvbiAnICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICcgZGF0YS1jb250ZW50PSI8c3Bhbj57e3RleHR9fTwvc3Bhbj4nICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICc8YnI+JyArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPHNtYWxsIGNsYXNzPVwndGV4dC1tdXRlZFwnIHN0eWxlPVwnY29sb3I6ICNmZmZmZmYgIWltcG9ydGFudDsgcGFkZGluZzogMHB4O1wnPnt7ZmlvfX0gLSB7e3ZhbGlkfX08L3NtYWxsPiInICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICcgY2xhc3M9ImctYm9kaWVzX19vcHRpb24ganMtc2VjdGlvbi1pdGVtLW9wdGlvbiIgdmFsdWU9Int7dmFsdWV9fSI+JyArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAne3t0ZXh0fX08L29wdGlvbj4nOwoKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHVzZXJOYW1lID0gX3RoaXMuX2V4dHJhY3RVc2VyTmFtZSh2LnN1YmplY3QpOwogICAgICAgICAgICAgICAgICAgICAgICBsZXQgbG9jYWxlVmFsaWREYXRlID0gbmV3IERhdGUodi52YWxpZCkudG9Mb2NhbGVTdHJpbmcoKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQgPSBjb250ZW50ICsgdGVtcGxhdGUucmVwbGFjZSgne3t2YWx1ZX19Jywgdi50aHVtYnByaW50KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoJ3t7dGV4dH19Jywgdi5uYW1lLnJlcGxhY2UoLyIvZywgJycpLnRvVXBwZXJDYXNlKCkpLnJlcGxhY2UoJ3t7dmFsaWR9fScsIGxvY2FsZVZhbGlkRGF0ZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKCd7e2Zpb319JywgdXNlck5hbWUpOwoKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAkKF90aGlzLmRvbS5jb250YWluZXIpLmh0bWwoY29udGVudCk7CiAgICAgICAgICAgICAgICAgICAgJChfdGhpcy5kb20uY29udGFpbmVyKS5zZWxlY3RwaWNrZXIoJ3JlZnJlc2gnKTsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7CiAgICAgICAgICAgICAgICAgICAgX3RoaXMuYWxlcnQuX3Nob3dJbnN0YWxsUmVxdWlyZW1lbnRzKCk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICB9CgogICAgfQoKICAgIGxldCBwbHVnaW4gPSBuZXcgUGx1Z2luKCIjY2VydGlmaWNhdGVzIik7CgogICAgY2xhc3MgQ29udGFpbmVyQXBpIGV4dGVuZHMgQ29tcG9uZW50IHsKCiAgICAgICAgY29uc3RydWN0b3Ioc2NvcGUsIHBsdWdpbiwgY29tcGxldGVPblNlbmQgPSBmYWxzZSkgewoKICAgICAgICAgICAgc3VwZXIoJycsIHNjb3BlKTsKCiAgICAgICAgICAgIHRoaXMubG9nZ2VyID0gbmV3IExvZ2dlcih0aGlzLnNjb3BlU2VsZWNvcigiI3RheC1sb2ciKSk7CiAgICAgICAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luOwoKICAgICAgICAgICAgdGhpcy5fYmFzZVVybCA9ICJodHRwczovL3RheHNpZ24ueWEteXVyaXN0LnJ1L2FwaS9jb250YWluZXJzIjsKICAgICAgICAgICAgdGhpcy5fYXBpa2V5ID0gIjlkODY2ZTg5LTY2YmEtNDZmZC1iMWJmLTMwN2YxYzk1ODNjOCI7CiAgICAgICAgICAgIHRoaXMuX3ZlcnNpb25PZlByb2cgPSAieWEteXVyaXN0IC0gdGF4c2lnbiAtIDEuMC4wLjAiOwoKICAgICAgICAgICAgdGhpcy5jb21wbGV0ZU9uU2VuZCA9IGNvbXBsZXRlT25TZW5kOwoKICAgICAgICAgICAgdGhpcy5kb20uJHNpZ25CdG4gPSB0aGlzLnNjb3BlU2VsZWNvcigiI3NpZ24iKTsKICAgICAgICAgICAgdGhpcy5kb20uJGRvY3NUb1NpZ24gPSB0aGlzLnNjb3BlU2VsZWNvcigiI2ZpcnN0LXBoYXNlLWNvbnRhaW5lciAuZmllbGRzZXRfX2l0ZW0iKTsKICAgICAgICAgICAgdGhpcy5kb20uJHNlY29uZFBoYXNlRG9jcyA9IHRoaXMuc2NvcGVTZWxlY29yKCIuc2Vjb25kLXBoYXNlLXVwbG9hZCIpOwogICAgICAgICAgICB0aGlzLmRvbS4kYXR0YWNoT3JkZXIgPSB0aGlzLnNjb3BlU2VsZWNvcigiLmF0dGFjaC1hZGQiKTsKICAgICAgICAgICAgdGhpcy5kb20uJGFkZGl0aW9uYWxEb2NzID0gdGhpcy5zY29wZVNlbGVjb3IoIi5hZGRpdGlvbmFsLWRvYy0wIik7CgogICAgICAgICAgICB0aGlzLmRvbS4kdGF4Q29kZSA9IHRoaXMuc2NvcGVTZWxlY29yKCIuaWZucy1jb2RlIHNwYW4iKTsKICAgICAgICAgICAgdGhpcy5kb20uJGluZm8gPSAiI2luZm8iOwogICAgICAgICAgICB0aGlzLmRvbS4kaW5mb0ZpcnN0bmFtZSA9IHRoaXMuZG9tLiRpbmZvICsgIiAjZmlyc3RuYW1lIjsKICAgICAgICAgICAgdGhpcy5kb20uJGluZm9MYXN0bmFtZSA9IHRoaXMuZG9tLiRpbmZvICsgIiAjbGFzdG5hbWUiOwogICAgICAgICAgICB0aGlzLmRvbS4kaW5mb0Z1bGxuYW1lID0gdGhpcy5kb20uJGluZm8gKyAiICNmdWxsbmFtZSI7CiAgICAgICAgICAgIHRoaXMuZG9tLiRpbmZvTWlkZGxlbmFtZSA9IHRoaXMuZG9tLiRpbmZvICsgIiAjbWlkZGxlbmFtZSI7CiAgICAgICAgICAgIHRoaXMuZG9tLiRpbmZvSW5uID0gdGhpcy5kb20uJGluZm8gKyAiICNpbm4iOwogICAgICAgICAgICB0aGlzLmRvbS4kaW5mb09ncm4gPSB0aGlzLmRvbS4kaW5mbyArICIgI29ncm4iOwogICAgICAgICAgICB0aGlzLmRvbS4kaW5mb09ncm5pcCA9IHRoaXMuZG9tLiRpbmZvICsgIiAjb2dybmlwIjsKCgogICAgICAgICAgICB0aGlzLl9lcnJvcnMgPSBbXTsKCgogICAgICAgICAgICB0aGlzLl90YXhDb2RlID0gJCh0aGlzLmRvbS4kdGF4Q29kZSkudGV4dCgpLnRyaW0oKTsKICAgICAgICAgICAgdGhpcy5fcmVxdWVzdFR5cGUgPSBBUFAuc2lnbi5kZWxpdmVyeV9vZl9kb2N1bWVudHM7CiAgICAgICAgICAgIHRoaXMuX3NlcnZpY2VUeXBlID0gJCh0aGlzLmRvbS4kaW5mbykuZGF0YSgic2VydmljZS10eXBlIik7CiAgICAgICAgICAgIHRoaXMuX2ZpcnN0TmFtZSA9ICQodGhpcy5kb20uJGluZm9GaXJzdG5hbWUpLnRleHQoKS50cmltKCk7CiAgICAgICAgICAgIHRoaXMuX3N1ck5hbWUgPSAkKHRoaXMuZG9tLiRpbmZvTGFzdG5hbWUpLnRleHQoKS50cmltKCk7CiAgICAgICAgICAgIHRoaXMuZW1haWwgPSBBUFAuc2lnbi5lbWFpbDsKCgogICAgICAgICAgICB0aGlzLnNlc3Npb25JZCA9IG51bGw7CiAgICAgICAgICAgIHRoaXMuZmlsZXMgPSB7fTsKCiAgICAgICAgICAgIHRoaXMuZmlsZXNDbnQgPSAgJCh0aGlzLmRvbS4kZG9jc1RvU2lnbikubGVuZ3RoICsgJCh0aGlzLmRvbS4kc2Vjb25kUGhhc2VEb2NzKS5sZW5ndGg7CgoKICAgICAgICAgICAgdGhpcy5wcm9jY2Vzc2VkRmlsZXNDbnQgPSAwOwoKICAgICAgICAgICAgdGhpcy5zZWNvbmRQaGFzZURvY3MgPSB7fTsKICAgICAgICAgICAgdGhpcy5hZGRpdGlvbmFsRG9jcyA9IHt9OwogICAgICAgICAgICB0aGlzLmF0dGFjaGVkT3JkZXIgPSB7fTsKCgoKCiAgICAgICAgICAgIHRoaXMuZGVidWdNb2RlID0gd2luZG93LmxvY2F0aW9uLmhyZWYuaW5jbHVkZXMoIi50ZXN0IikgfHwgd2luZG93LmxvY2F0aW9uLmhyZWYuaW5jbHVkZXMoInRheHNpZ25EZWJ1Zz10cnVlIik7CgogICAgICAgICAgICB0aGlzLmNvbnNvbGVMb2dnZXIgPSBuZXcgQ29uc29sZUxvZ2dlcih0aGlzLmRlYnVnTW9kZSk7CgogICAgICAgICAgICB0aGlzLmNvbnNvbGVMb2dnZXIuZGVidWcoImRlYnVnTW9kZSA9ICIgKyB0aGlzLmRlYnVnTW9kZSk7CgogICAgICAgICAgICBsZXQgX3RoaXMgPSB0aGlzOwoKICAgICAgICAgICAgdGhpcy5fdG9nZ2xlU2lnbkJ0blN0YXRlKCk7CgogICAgICAgICAgICAkKHRoaXMuZG9tLiRzZWNvbmRQaGFzZURvY3MpLm9uKCJjaGFuZ2UiLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICBfdGhpcy5fdG9nZ2xlU2lnbkJ0blN0YXRlKCk7CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgJCh0aGlzLmRvbS4kc2lnbkJ0bikub24oJ2NsaWNrJywgZnVuY3Rpb24gKGV2ZW50KSB7CgogICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgICAgICAgIF90aGlzLl9lcnJvcnMgPSBbXTsKCiAgICAgICAgICAgICAgICBfdGhpcy5wbHVnaW4uY2hlY2soJCgiI2NlcnRpZmljYXRlcyIpLnZhbCgpKS50aGVuKAogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uICgpIHsKCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkKF90aGlzLmRvbS4kYXR0YWNoT3JkZXIpLmlzKCI6dmlzaWJsZSIpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5hdHRhY2hlZE9yZGVyQ250ID0gJChfdGhpcy5kb20uJGF0dGFjaE9yZGVyICsgIiAuaGlkZGVuIikubGVuZ3RoOwogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuYXR0YWNoZWRPcmRlckNudCA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkKF90aGlzLmRvbS4kYWRkaXRpb25hbERvY3MpLmlzKCI6dmlzaWJsZSIpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5hZGRpdGlvbmFsRG9jc0NudCA9ICQoX3RoaXMuZG9tLiRhZGRpdGlvbmFsRG9jcykuZmlsZWlucHV0KCdnZXRGaWxlc0NvdW50Jyk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5hZGRpdGlvbmFsRG9jc0NudCA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KCgogICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5maWxlc0NudCArPSBfdGhpcy5hdHRhY2hlZE9yZGVyQ250ICsgX3RoaXMuYWRkaXRpb25hbERvY3NDbnQ7CgogICAgICAgICAgICAgICAgICAgICAgICBpZiAoJChfdGhpcy5kb20uJGF0dGFjaE9yZGVyKS5pcygiOnZpc2libGUiKSkgX3RoaXMuZmlsZXNDbnQgLT0gX3RoaXMuYXR0YWNoZWRPcmRlckNudDsKCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghQVBQLnNpZ24uY29udGFpbmVyQ29tcGxldGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLm5ld1Nlc3Npb24oKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnNldFNlc3Npb25LZXkoQVBQLnNpZ24uc2Vzc2lvbktleSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9LAoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoZXJyb3JzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmNvbnNvbGVMb2dnZXIuZGVidWcoItCa0LvRjtGHINC90LUg0LLQsNC70LjQtNC10L0iKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlcnJvcnMubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMubG9nZ2VyLmxvZygi0JLRi9Cx0YDQsNC9INC90LUg0LLQsNC70LjQtNC90YvQuSDRgdC10YDRgtC40YTQuNC60LDRgi4iKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRPRE86IHByaW50IHZhbGlkYXRpb24gZXJyb3JzCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgJC5lYWNoKGVycm9ycywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKTsKCgogICAgICAgICAgICAgICAgX3RoaXMuX2NhbldlQ29udGludWUoKTsKCiAgICAgICAgICAgIH0pOwogICAgICAgIH0KCiAgICAgICAgX2lzQWxsRmlsZXNTZWxlY3RlZChzZWxlY3RvcikgewogICAgICAgICAgICBsZXQgYWxsU2VsZWN0ZWQgPSB0cnVlOwogICAgICAgICAgICAkKHNlbGVjdG9yKS5lYWNoKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIGlmICgkKHRoaXMpLnZhbCgpID09PSAiIikgewogICAgICAgICAgICAgICAgICAgIGFsbFNlbGVjdGVkID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIHJldHVybiBhbGxTZWxlY3RlZDsKICAgICAgICB9CgogICAgICAgIF90b2dnbGVTaWduQnRuU3RhdGUoKSB7CiAgICAgICAgICAgIGlmIChBUFAuc2lnbi5jb250YWluZXJDb21wbGV0ZSkgewogICAgICAgICAgICAgICAgJCh0aGlzLmRvbS4kc2lnbkJ0bikucHJvcCgiZGlzYWJsZWQiLCB0cnVlKS5hZGRDbGFzcygiZGlzYWJsZWQiKTsKICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLmxvZygi0JLRiyDRg9C20LUg0L7RgtC/0YDQsNCy0LvRj9C70Lgg0LTQvtC60YPQvNC10L3RgtGLINCyINC90LDQu9C+0LPQvtCy0YPRjiDQv9C+INC00LDQvdC90L7QuSDRg9GB0LvRg9Cz0LUuIik7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGxldCBlbWFpbFZhbCA9IEFQUC5zaWduLmVtYWlsOwogICAgICAgICAgICBpZiAodGhpcy5faXNBbGxGaWxlc1NlbGVjdGVkKHRoaXMuZG9tLiRzZWNvbmRQaGFzZURvY3MpICYmIChlbWFpbFZhbCAhPT0gIiIgJiYgZW1haWxWYWwgIT09IHVuZGVmaW5lZCkpIHsKICAgICAgICAgICAgICAgICQodGhpcy5kb20uJHNpZ25CdG4pLnByb3AoImRpc2FibGVkIiwgZmFsc2UpLnJlbW92ZUNsYXNzKCJkaXNhYmxlZCIpOwogICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIubG9nKCIiKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGlmIChlbWFpbFZhbCA9PT0gIiIgfHwgZW1haWxWYWwgPT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLmxvZygi0JLQtdGA0L3QuNGC0LXRgdGMINC90LAg0L/RgNC10LTRi9C00YPRidC40Lkg0YjQsNCzINC4INCy0LLQtdC00LjRgtC1INGN0LvQtdC60YLRgNC+0L3QvdGD0Y4g0L/QvtGH0YLRgy4iKQogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLmxvZ2dlci5sb2coItCX0LDQv9C+0LvQvdC40YLQtSDQvtCx0Y/Qt9Cw0YLQtdC70YzQvdGL0LUg0L/QvtC70Y8g0LTQviDQt9C10LvQtdC90L7QuSDRh9C10YDRgtGLLiIpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICQodGhpcy5kb20uJHNpZ25CdG4pLnByb3AoImRpc2FibGVkIiwgdHJ1ZSkuYWRkQ2xhc3MoImRpc2FibGVkIik7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIF9kZWNvcmF0ZVN1Y2Nlc3NIYW5kbGVyKG9rSGFuZGxlcikgewogICAgICAgICAgICBsZXQgX3RoaXMgPSB0aGlzOwogICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGRhdGEsIHN0YXR1cywgeGhyKSB7CgogICAgICAgICAgICAgICAgaWYgKGRhdGEuc3RhdHVzICE9PSAiRVJSIikgewogICAgICAgICAgICAgICAgICAgIG9rSGFuZGxlci5jYWxsKHRoaXMsIGRhdGEsIHN0YXR1cywgeGhyKTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgX3RoaXMuX2Vycm9ycy5wdXNoKHRydWUpOwogICAgICAgICAgICAgICAgICAgIF90aGlzLmxvZ2dlci5sb2coItCe0YjQuNCx0LrQsCDQv9GA0Lgg0YTQvtGA0LzQuNGA0L7QstCw0L3QuNC4INC60L7QvdGC0LXQudC90LXRgNCwIC0gRVJSOiAiICsgZGF0YS5tZXNzYWdlKTsKICAgICAgICAgICAgICAgICAgICBSYXZlbi5jYXB0dXJlTWVzc2FnZSgn0J7RiNC40LHQutCwINC/0YDQuCDRhNC+0YDQvNC40YDQvtCy0LDQvdC40Lgg0LrQvtC90YLQtdC50L3QtdGA0LAgLSBFUlInLCB7CiAgICAgICAgICAgICAgICAgICAgICAgIGxldmVsOiAnZXJyb3InLAogICAgICAgICAgICAgICAgICAgICAgICBleHRyYTogZGF0YQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICQoX3RoaXMuZG9tLiRzZWNvbmRQaGFzZURvY3MpLmZpbGVpbnB1dCgncmVzZXQnKTsKICAgICAgICAgICAgICAgICAgICB3aW5kb3cub25iZWZvcmV1bmxvYWQgPSBudWxsOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9OwogICAgICAgIH0KCiAgICAgICAgX2NhbldlQ29udGludWUoKSB7CiAgICAgICAgICAgIGlmICh0aGlzLl9lcnJvcnMubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgbGV0IG1lc3NhZ2UgPSAi0J3QsCDQv9GA0LXQtNGL0LTRg9GJ0LjRhSDRiNCw0LPQsNGFINCx0YvQu9C4INC30YTQsNGE0LjQutGB0LjRgNC+0LLQsNC90Ysg0L7RiNC40LHQutC4LiDQn9GA0LXQutGA0LDRidCw0LXQvCDRgNCw0LHQvtGC0YMuIjsKICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLmxvZyhtZXNzYWdlKTsKICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihtZXNzYWdlKTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgX3JlcXVlc3QocGF0aCwgb3B0aW9ucykgewogICAgICAgICAgICBsZXQgX29wdHMgPSBvcHRpb25zLAogICAgICAgICAgICAgICAgX3VybDsKCiAgICAgICAgICAgIGZ1bmN0aW9uIGVycih4aHIsIHN0YXR1c1RleHQsIGVycm9yVGV4dCkgewogICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3JUZXh0KTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgX29wdHNbImRhdGFUeXBlIl0gPSAianNvbiI7CiAgICAgICAgICAgIF9vcHRzWyJlcnJvciJdID0gZXJyOwogICAgICAgICAgICBfb3B0c1siaGVhZGVycyJdID0ge307CiAgICAgICAgICAgIF9vcHRzLmhlYWRlcnNbIkF1dGhvcml6YXRpb24iXSA9ICJCZWFyZXIgIiArIHRoaXMuX2FwaWtleTsKICAgICAgICAgICAgX29wdHMuaGVhZGVyc1siQ29udGVudC1UeXBlIl0gPSAiYXBwbGljYXRpb24vanNvbiI7CgogICAgICAgICAgICBpZiAodGhpcy5zZXNzaW9uSWQgIT09IG51bGwgJiYgdGhpcy5zZXNzaW9uSWQgIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICAgICAgX3VybCA9IHRoaXMuX2Jhc2VVcmwgKyAiLyIgKyB0aGlzLnNlc3Npb25JZCArIHBhdGg7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBfdXJsID0gdGhpcy5fYmFzZVVybCArIHBhdGg7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHRoaXMuX2NhbldlQ29udGludWUoKTsKCiAgICAgICAgICAgICQuYWpheChfdXJsLCBfb3B0cyk7CiAgICAgICAgfQoKICAgICAgICBfc2V0U2Vzc2lvbktleUZvckRvY3VtZW50KGtleSkgewogICAgICAgICAgICAkLmdldCgiL2RvY3VtZW50LyIgKyBBUFAuc2lnbi5zZXJ2aWNlICsgIi9zZXQtdGF4LXNpZ24tc2Vzc2lvbi1rZXkiLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50SWQ6IEFQUC5zaWduLmRvY3VtZW50SWQsCiAgICAgICAgICAgICAgICAgICAgc2Vzc2lvbktleToga2V5CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICkuZG9uZShmdW5jdGlvbiAoZGF0YSkgewogICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ19zZXRTZXNzaW9uS2V5OiAnICsgZGF0YSk7CiAgICAgICAgICAgIH0pLmZhaWwoZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdfc2V0U2Vzc2lvbktleTogJyArIGRhdGEpOwogICAgICAgICAgICB9KTsKICAgICAgICB9CgogICAgICAgIF9zZXRDb250YWluZXJDb21wbGV0ZSgpIHsKICAgICAgICAgICAgaWYgKHRoaXMuY29tcGxldGVPblNlbmQgPT09IGZhbHNlIHx8IHRoaXMuZGVidWdNb2RlKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gJC5EZWZlcnJlZCgpLnJlc29sdmUoKTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gJC5nZXQoIi9kb2N1bWVudC8iICsgQVBQLnNpZ24uc2VydmljZSArICIvY29udGFpbmVyLWNvbXBsZXRlIiwge2RvY3VtZW50SWQ6IEFQUC5zaWduLmRvY3VtZW50SWR9KTsKICAgICAgICB9CgogICAgICAgIF91cGxvYWRBbmRXYWl0KCkgewogICAgICAgICAgICBsZXQgdXBsb2FkZXJzID0gW107CgogICAgICAgICAgICBsZXQgX3RoaXMgPSB0aGlzOwoKCiAgICAgICAgICAgIHRoaXMuX2NhbldlQ29udGludWUoKTsKCgogICAgICAgICAgICBpZiAoJCh0aGlzLmRvbS4kc2Vjb25kUGhhc2VEb2NzKS5sZW5ndGggPT09IDAgJiYgJCh0aGlzLmRvbS4kYXR0YWNoT3JkZXIpLmxlbmd0aCA9PT0gMCkgewogICAgICAgICAgICAgICAgcmV0dXJuIFsKICAgICAgICAgICAgICAgICAgICBuZXcgUHJvbWlzZSgocikgPT4gewogICAgICAgICAgICAgICAgICAgICAgICByKCkKICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgXQogICAgICAgICAgICB9CgoKCiAgICAgICAgICAgICQodGhpcy5kb20uJHNlY29uZFBoYXNlRG9jcykuZWFjaChmdW5jdGlvbiAoaWR4LCBlbCkgewogICAgICAgICAgICAgICAgd2luZG93LmlkeCA9IGlkeCArIDE7CiAgICAgICAgICAgICAgICB1cGxvYWRlcnMucHVzaChuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgICAgICAgICAgICAgICAgJChfdGhpcy5zY29wZVNlbGVjb3IoIi5zcGh1LSIpICsgd2luZG93LmlkeCkub24oImZpbGV1cGxvYWRlZCIsIGZ1bmN0aW9uIChldmVudCwgZGF0YSwgcHJldmlld0lkLCBpbmRleCkgewogICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5jb25zb2xlTG9nZ2VyLmxvZygnX3VwbG9hZEFuZFdhaXQ6IHNlY29uUGhhc2VEb2NzIDogZXZlbnQgZmlyZWQ6IGZpbGV1cGxvYWRlZCcpOwogICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5zZWNvbmRQaGFzZURvY3NbRGF0ZS5ub3coKV0gPSBkYXRhLnJlc3BvbnNlOwogICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5jb25zb2xlTG9nZ2VyLmRlYnVnKCJfdXBsb2FkQW5kV2FpdDogc2Vjb25kUGhhc2VVcGxvYWRzIFtpbmRleCAiICsgaW5kZXggKyAiXSA9PiAiKTsKICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuY29uc29sZUxvZ2dlci5kZWJ1ZyhkYXRhKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShkYXRhLnJlc3BvbnNlKTsKICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgJChfdGhpcy5zY29wZVNlbGVjb3IoIi5zcGh1LSIpICsgd2luZG93LmlkeCkub24oJ2ZpbGV1cGxvYWRlcnJvcicsIGZ1bmN0aW9uIChldmVudCwgZGF0YSwgcHJldmlld0lkLCBpbmRleCkgewogICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5fZXJyb3JzLnB1c2godHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmxvZ2dlci5sb2coZGF0YS5yZXNwb25zZS5lcnJvcik7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdfdXBsb2FkQW5kV2FpdDogZXZlbnQgZmlyZWQ6ICcgKyBkYXRhLnJlc3BvbnNlLmVycm9yKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGRhdGEucmVzcG9uc2UpOwogICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICAgIH0pOwoKCiAgICAgICAgICAgIGlmICh0aGlzLmF0dGFjaGVkT3JkZXJDbnQgPiAwKSB7CiAgICAgICAgICAgICAgICB3aW5kb3cuYXR0YWNoZWRPcmRlcnNVcGxvYWRzQ250ID0gMDsKICAgICAgICAgICAgICAgIHVwbG9hZGVycy5wdXNoKG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgICAgICAgICAgICAgICAgICAgJChfdGhpcy5kb20uJGF0dGFjaE9yZGVyICsgJyAuaGlkZGVuJykub24oImZpbGV1cGxvYWRlZCIsIGZ1bmN0aW9uIChldmVudCwgZGF0YSwgcHJldmlld0lkLCBpbmRleCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuY29uc29sZUxvZ2dlci5sb2coJ191cGxvYWRBbmRXYWl0OiBhdHRhY2hlZE9yZGVycyA6IGV2ZW50IGZpcmVkOiBmaWxldXBsb2FkZWQnKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmF0dGFjaGVkT3JkZXJbRGF0ZS5ub3coKV0gPSBkYXRhLnJlc3BvbnNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuY29uc29sZUxvZ2dlci5kZWJ1ZygiX3VwbG9hZEFuZFdhaXQ6IGF0dGFjaGVkT3JkZXJzIFtpbmRleCAiICsgaW5kZXggKyAiXSA9PiAiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmNvbnNvbGVMb2dnZXIuZGVidWcoZGF0YSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmF0dGFjaGVkT3JkZXJzVXBsb2Fkc0NudCArPSAxOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh3aW5kb3cuYXR0YWNoZWRPcmRlcnNVcGxvYWRzQ250ID09PSBfdGhpcy5hdHRhY2hlZE9yZGVyQ250KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuY29uc29sZUxvZ2dlci5kZWJ1ZygiX3VwbG9hZEFuZFdhaXQ6IGF0dGFjaGVkT3JkZXJzIFtpbmRleCAiICsgaW5kZXggKyAiXSA9PiBSRVNPTFZFIFBST01JU0UiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKGRhdGEucmVzcG9uc2UpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgICAgICQoX3RoaXMuZG9tLiRhdHRhY2hPcmRlciArICcgLmhpZGRlbicpLm9uKCdmaWxldXBsb2FkZXJyb3InLCBmdW5jdGlvbiAoZXZlbnQsIGRhdGEsIHByZXZpZXdJZCwgaW5kZXgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLl9lcnJvcnMucHVzaCh0cnVlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmxvZ2dlci5sb2coZGF0YS5yZXNwb25zZS5lcnJvcik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnX3VwbG9hZEFuZFdhaXQ6IGV2ZW50IGZpcmVkOiAnICsgZGF0YS5yZXNwb25zZS5lcnJvcik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWplY3QoZGF0YS5yZXNwb25zZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgJCh0aGlzLmRvbS4kYXR0YWNoT3JkZXIgKyAnIC5oaWRkZW4nKS5maWxlaW5wdXQoJ3VwbG9hZCcpOwogICAgICAgICAgICB9CgoKICAgICAgICAgICAgaWYgKHRoaXMuYWRkaXRpb25hbERvY3NDbnQgPiAwKSB7CiAgICAgICAgICAgICAgICB3aW5kb3cuYWRkaXRpcG5hbFVwbG9hZHNDbnQgPSAwOwogICAgICAgICAgICAgICAgdXBsb2FkZXJzLnB1c2gobmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgICAgICAgICAgICAgICAgICAkKF90aGlzLmRvbS4kYWRkaXRpb25hbERvY3MpLm9uKCJmaWxldXBsb2FkZWQiLCBmdW5jdGlvbiAoZXZlbnQsIGRhdGEsIHByZXZpZXdJZCwgaW5kZXgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmNvbnNvbGVMb2dnZXIubG9nKCdfdXBsb2FkQW5kV2FpdDogYWRkaXRpb25hbERvY3MgOiBldmVudCBmaXJlZDogZmlsZXVwbG9hZGVkJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5hZGRpdGlvbmFsRG9jc1tEYXRlLm5vdygpXSA9IGRhdGEucmVzcG9uc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5jb25zb2xlTG9nZ2VyLmRlYnVnKCJfdXBsb2FkQW5kV2FpdDogYWRkaXRpb25hbERvY3MgW2luZGV4ICIgKyBpbmRleCArICJdID0+ICIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuY29uc29sZUxvZ2dlci5kZWJ1ZyhkYXRhKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmFkZGl0aXBuYWxVcGxvYWRzQ250ICs9IDE7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHdpbmRvdy5hZGRpdGlwbmFsVXBsb2Fkc0NudCAgPT09IF90aGlzLmFkZGl0aW9uYWxEb2NzQ250KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuY29uc29sZUxvZ2dlci5kZWJ1ZygiX3VwbG9hZEFuZFdhaXQ6IGFkZGl0aW9uYWxEb2NzIFtpbmRleCAiICsgaW5kZXggKyAiXSA9PiBSRVNPTFZFIFBST01JU0UiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKGRhdGEucmVzcG9uc2UpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgICAgICQoX3RoaXMuZG9tLiRhZGRpdGlvbmFsRG9jcykub24oJ2ZpbGV1cGxvYWRlcnJvcicsIGZ1bmN0aW9uIChldmVudCwgZGF0YSwgcHJldmlld0lkLCBpbmRleCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuX2Vycm9ycy5wdXNoKHRydWUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMubG9nZ2VyLmxvZyhkYXRhLnJlc3BvbnNlLmVycm9yKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdfdXBsb2FkQW5kV2FpdDogZXZlbnQgZmlyZWQ6ICcgKyBkYXRhLnJlc3BvbnNlLmVycm9yKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChkYXRhLnJlc3BvbnNlKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAkKHRoaXMuZG9tLiRhZGRpdGlvbmFsRG9jcykuZmlsZWlucHV0KCd1cGxvYWQnKTsKICAgICAgICAgICAgfQoKCiAgICAgICAgICAgICQodGhpcy5kb20uJHNlY29uZFBoYXNlRG9jcykuZmlsZWlucHV0KCd1cGxvYWQnKTsKICAgICAgICAgICAgcmV0dXJuIHVwbG9hZGVyczsKICAgICAgICB9CgogICAgICAgIHNldFNlc3Npb25LZXkoa2V5KSB7CiAgICAgICAgICAgIHRoaXMuc2Vzc2lvbklkID0ga2V5OwogICAgICAgIH0KCiAgICAgICAgbmV3U2Vzc2lvbigpIHsKICAgICAgICAgICAgbGV0IHVybCA9ICIvbmV3IjsKCiAgICAgICAgICAgIGxldCBfdGhpcyA9IHRoaXM7CgoKICAgICAgICAgICAgbGV0IG9rID0gX3RoaXMuX2RlY29yYXRlU3VjY2Vzc0hhbmRsZXIoCiAgICAgICAgICAgICAgICBmdW5jdGlvbiBvayhkYXRhLCBzdGF0dXMsIHhocikgewogICAgICAgICAgICAgICAgICAgIF90aGlzLnNlc3Npb25JZCA9IGRhdGEuc2Vzc2lvbktleTsKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygibmV3U2Vzc2lvbjogc2Vzc2lvbktleSA9ICIgKyBfdGhpcy5zZXNzaW9uSWQpOwoKICAgICAgICAgICAgICAgICAgICBfdGhpcy5sb2dnZXIubG9nKCLQmtC70Y7RhyDRgdC10YHRgdC40Lg6ICIgKyBfdGhpcy5zZXNzaW9uSWQpOwoKICAgICAgICAgICAgICAgICAgICBfdGhpcy5fc2V0U2Vzc2lvbktleUZvckRvY3VtZW50KF90aGlzLnNlc3Npb25JZCk7CgogICAgICAgICAgICAgICAgICAgIC8vIHJ1biB0aGUgbmV4dCBzdGVwIGluIGNoYWluCiAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzLl9zZXJ2aWNlVHlwZSA9PT0gImxsYyIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuY3JlYXRlVWwoKTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5jcmVhdGVTcCgpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgKTsKCiAgICAgICAgICAgIF90aGlzLl9jYW5XZUNvbnRpbnVlKCk7CgogICAgICAgICAgICB3aW5kb3cub25iZWZvcmV1bmxvYWQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICQodGhpcy5kb20uJHNpZ25CdG4pLmF0dHIoImRpc2FibGVkIiwgdHJ1ZSkuYWRkQ2xhc3MoImRpc2FibGVkIik7CiAgICAgICAgICAgIF90aGlzLmxvZ2dlci5sb2coItCf0L7QtNCz0L7RgtC+0LLQutCwINC6INC30LDQv9GD0YHQutGDLi4uIik7CiAgICAgICAgICAgIF90aGlzLl9yZXF1ZXN0KHVybCwgewogICAgICAgICAgICAgICAgdHlwZTogIlBPU1QiLAogICAgICAgICAgICAgICAgc3VjY2Vzczogb2sKICAgICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICBjcmVhdGVVbCgpIHsKICAgICAgICAgICAgbGV0IHVybCA9ICIvbGxjIiwKICAgICAgICAgICAgICAgIG9ncm4gPSAkKHRoaXMuZG9tLiRpbmZvT2dybikudGV4dCgpLnRyaW0oKSwKICAgICAgICAgICAgICAgIGZ1bGxuYW1lID0gJCh0aGlzLmRvbS4kaW5mb0Z1bGxuYW1lKS50ZXh0KCkudHJpbSgpLAogICAgICAgICAgICAgICAgZmlyc3REb2MgPSAkKHRoaXMuZG9tLiRkb2NzVG9TaWduKS5maXJzdCgpLmRhdGEoInRheC1jb2RlIik7CgogICAgICAgICAgICBsZXQgX3RoaXMgPSB0aGlzOwoKICAgICAgICAgICAgbGV0IGRhdGEgPSB7CiAgICAgICAgICAgICAgICBkb2N1bWVudENvZGU6IGZpcnN0RG9jLAogICAgICAgICAgICAgICAgcmVjZWl2ZUlkOiB0aGlzLl90YXhDb2RlLAogICAgICAgICAgICAgICAgdmVyc2lvbk9mUHJvZzogdGhpcy5fdmVyc2lvbk9mUHJvZywKICAgICAgICAgICAgICAgIHJlcXVlc3RUeXBlOiB0aGlzLl9yZXF1ZXN0VHlwZSwKICAgICAgICAgICAgICAgIG9ncm46IG9ncm4sCiAgICAgICAgICAgICAgICBmdWxsTmFtZTogZnVsbG5hbWUKICAgICAgICAgICAgfTsKCgogICAgICAgICAgICBsZXQgb2sgPSBfdGhpcy5fZGVjb3JhdGVTdWNjZXNzSGFuZGxlcigKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIG9rKGRhdGEsIHN0YXR1cywgeGhyKSB7CiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coImNyZWF0ZVVsOiBwYWNrYWdlID0gIiArIGRhdGEucGFja2FnZSk7CiAgICAgICAgICAgICAgICAgICAgX3RoaXMubG9nZ2VyLmxvZygi0JrQvtC90YLQtdC50L3QtdGAINC00LvRjyDQntCe0J4g0YHQvtC30LTQsNC9Iik7CiAgICAgICAgICAgICAgICAgICAgX3RoaXMuYWRkQXBwbGljYW50KCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICk7CgogICAgICAgICAgICB0aGlzLl9jYW5XZUNvbnRpbnVlKCk7CgogICAgICAgICAgICBfdGhpcy5fcmVxdWVzdCh1cmwsIHsKICAgICAgICAgICAgICAgIHR5cGU6ICJQT1NUIiwKICAgICAgICAgICAgICAgIGRhdGE6IEpTT04uc3RyaW5naWZ5KGRhdGEpLAogICAgICAgICAgICAgICAgcHJvY2Vzc0RhdGE6IGZhbHNlLAogICAgICAgICAgICAgICAgc3VjY2Vzczogb2sKICAgICAgICAgICAgfSk7CgogICAgICAgIH0KCiAgICAgICAgY3JlYXRlU3AoKSB7CiAgICAgICAgICAgIGxldCB1cmwgPSAiL3NwIiwKICAgICAgICAgICAgICAgIGlubiA9ICQodGhpcy5kb20uJGluZm9Jbm4pLnRleHQoKS50cmltKCksCiAgICAgICAgICAgICAgICBmaXJzdG5hbWUgPSAkKHRoaXMuZG9tLiRpbmZvRmlyc3RuYW1lKS50ZXh0KCkudHJpbSgpLAogICAgICAgICAgICAgICAgbGFzdG5hbWUgPSAkKHRoaXMuZG9tLiRpbmZvTGFzdG5hbWUpLnRleHQoKS50cmltKCksCiAgICAgICAgICAgICAgICBtaWRkbGVuYW1lID0gJCh0aGlzLmRvbS4kaW5mb01pZGRsZW5hbWUpLnRleHQoKS50cmltKCksCiAgICAgICAgICAgICAgICBmaXJzdERvYyA9ICQodGhpcy5kb20uJGRvY3NUb1NpZ24pLmZpcnN0KCkuZGF0YSgidGF4LWNvZGUiKSwKICAgICAgICAgICAgICAgIGVtYWlsID0gQVBQLnNpZ24uZW1haWwsCiAgICAgICAgICAgICAgICBvZ3JuaXA7CgogICAgICAgICAgICBsZXQgX3RoaXMgPSB0aGlzOwoKCiAgICAgICAgICAgICgkKHRoaXMuZG9tLiRpbmZvT2dybmlwKSkgPyBvZ3JuaXAgPSAkKHRoaXMuZG9tLiRpbmZvT2dybmlwKS50ZXh0KCkudHJpbSgpIDogIiI7CgogICAgICAgICAgICBsZXQgZGF0YSA9IHsKICAgICAgICAgICAgICAgIGRvY3VtZW50Q29kZTogZmlyc3REb2MsCiAgICAgICAgICAgICAgICByZWNlaXZlSWQ6IHRoaXMuX3RheENvZGUsCiAgICAgICAgICAgICAgICB2ZXJzaW9uT2ZQcm9nOiB0aGlzLl92ZXJzaW9uT2ZQcm9nLAogICAgICAgICAgICAgICAgcmVxdWVzdFR5cGU6IHRoaXMuX3JlcXVlc3RUeXBlLAogICAgICAgICAgICAgICAgb2dybmlwOiBvZ3JuaXAsCiAgICAgICAgICAgICAgICBmaXJzdE5hbWU6IGZpcnN0bmFtZSwKICAgICAgICAgICAgICAgIHN1ck5hbWU6IGxhc3RuYW1lLAogICAgICAgICAgICAgICAgbWlkZGxlTmFtZTogbWlkZGxlbmFtZSwKICAgICAgICAgICAgICAgIGVtYWlsOiBlbWFpbCwKICAgICAgICAgICAgICAgIGlubkZsOiBpbm4KICAgICAgICAgICAgfTsKCgogICAgICAgICAgICBsZXQgb2sgPSBfdGhpcy5fZGVjb3JhdGVTdWNjZXNzSGFuZGxlcigKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIG9rKGRhdGEsIHN0YXR1cywgeGhyKSB7CiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coImNyZWF0ZVNwOiBwYWNrYWdlID0gIiArIGRhdGEucGFja2FnZSk7CiAgICAgICAgICAgICAgICAgICAgX3RoaXMubG9nZ2VyLmxvZygi0JrQvtC90YLQtdC50L3QtdGAINC00LvRjyDQmNCfINGB0L7Qt9C00LDQvSIpOwogICAgICAgICAgICAgICAgICAgIF90aGlzLmFkZEFwcGxpY2FudCgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICApOwoKCiAgICAgICAgICAgIHRoaXMuX2NhbldlQ29udGludWUoKTsKCiAgICAgICAgICAgIF90aGlzLl9yZXF1ZXN0KHVybCwgewogICAgICAgICAgICAgICAgdHlwZTogIlBPU1QiLAogICAgICAgICAgICAgICAgZGF0YTogSlNPTi5zdHJpbmdpZnkoZGF0YSksCiAgICAgICAgICAgICAgICBwcm9jZXNzRGF0YTogZmFsc2UsCiAgICAgICAgICAgICAgICBzdWNjZXNzOiBvawogICAgICAgICAgICB9KTsKCiAgICAgICAgfQoKICAgICAgICBhZGRBcHBsaWNhbnQoKSB7CiAgICAgICAgICAgIGxldCB1cmwgPSAiL2FwcGxpY2FudCI7CgogICAgICAgICAgICBsZXQgX3RoaXMgPSB0aGlzOwoKICAgICAgICAgICAgbGV0IGRhdGEgPSB7CiAgICAgICAgICAgICAgICBmaXJzdE5hbWU6IHRoaXMuX2ZpcnN0TmFtZSwKICAgICAgICAgICAgICAgIHN1ck5hbWU6IHRoaXMuX3N1ck5hbWUsCiAgICAgICAgICAgICAgICBlbWFpbDogX3RoaXMuZW1haWwKICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIF90aGlzLmxvZ2dlci5sb2coItCU0L7QsdCw0LLRj9C70LXQvCDQt9Cw0Y/QstC40YLQtdC70Y8g0LIg0LrQvtC90YLQtdC50L3QtdGAIik7CgogICAgICAgICAgICBsZXQgb2sgPSBfdGhpcy5fZGVjb3JhdGVTdWNjZXNzSGFuZGxlcigKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIG9rKGRhdGEsIHN0YXR1cywgeGhyKSB7CiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coImFkZEFwcGxpY2FudDogcGFja2FnZSA9ICIgKyBkYXRhLnBhY2thZ2UpOwogICAgICAgICAgICAgICAgICAgIF90aGlzLmxvZ2dlci5sb2coItCX0LDRj9Cy0LjRgtC10LvRjCDQtNC70Y8g0J7QntCeINC00L7QsdCw0LLQu9C10L0g0LIg0LrQvtC90YLQtdC50L3QtdGAIik7CiAgICAgICAgICAgICAgICAgICAgX3RoaXMuYWRkRmlsZSgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICApOwoKICAgICAgICAgICAgX3RoaXMuX2NhbldlQ29udGludWUoKTsKCgogICAgICAgICAgICBpZiAoX3RoaXMuX3NlcnZpY2VUeXBlID09PSAic3AiKSB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygiYWRkQXBwbGljYW50OiBTS0lQUElORyBGT1IgU1AhISEiKTsKICAgICAgICAgICAgICAgIF90aGlzLmxvZ2dlci5sb2coItCf0YDQvtC/0YPRgdC6INC30LDRj9Cy0LjRgtC10LvRjyDQtNC70Y8g0JjQnyIpOwogICAgICAgICAgICAgICAgX3RoaXMuYWRkRmlsZSgpOwogICAgICAgICAgICAgICAgcmV0dXJuOwoKICAgICAgICAgICAgfQoKICAgICAgICAgICAgX3RoaXMuX3JlcXVlc3QodXJsLCB7CiAgICAgICAgICAgICAgICB0eXBlOiAiUE9TVCIsCiAgICAgICAgICAgICAgICBkYXRhOiBKU09OLnN0cmluZ2lmeShkYXRhKSwKICAgICAgICAgICAgICAgIHByb2Nlc3NEYXRhOiBmYWxzZSwKICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IG9rCiAgICAgICAgICAgIH0pOwoKICAgICAgICB9CgogICAgICAgIGFkZEZpbGUoKSB7CiAgICAgICAgICAgIGxldCB1cmwgPSAiL2FkZGZpbGUiLAogICAgICAgICAgICAgICAgZmlsZXMgPSAkKHRoaXMuZG9tLiRkb2NzVG9TaWduKTsKCiAgICAgICAgICAgIGxldCBfdGhpcyA9IHRoaXM7CgogICAgICAgICAgICB0aGlzLl9jYW5XZUNvbnRpbnVlKCk7CgogICAgICAgICAgICBQcm9taXNlLmFsbCh0aGlzLl91cGxvYWRBbmRXYWl0KCkpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgX3RoaXMuY29uc29sZUxvZ2dlci5kZWJ1ZygnYWRkRmlsZTogYWxsIHByb21pZXNlcyByZXNvbHZlZCBpbiBfdXBsb2FkQW5kV2FpdDogX3RoaXMuZmlsZXMgPT4gJyk7CiAgICAgICAgICAgICAgICBfdGhpcy5jb25zb2xlTG9nZ2VyLmRlYnVnKF90aGlzLmZpbGVzKTsKICAgICAgICAgICAgICAgICQuZWFjaChmaWxlcywgZnVuY3Rpb24gKGluZGV4KSB7CgogICAgICAgICAgICAgICAgICAgIGxldCB0ZW1wbGF0ZUlkID0gJCh0aGlzKS5kYXRhKCJ0ZW1wbGF0ZS1pZCIpLAogICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudElkID0gJCh0aGlzKS5kYXRhKCJkb2N1bWVudC1pZCIpLAogICAgICAgICAgICAgICAgICAgICAgICBzZXJ2aWNlID0gJCh0aGlzKS5kYXRhKCJzZXJ2aWNlIiksCiAgICAgICAgICAgICAgICAgICAgICAgIGRvY0NvZGUgPSAkKHRoaXMpLmRhdGEoInRheC1jb2RlIiksCiAgICAgICAgICAgICAgICAgICAgICAgIGF0dGFjaGVkRmlsZVNlbGVjdG9yID0gIi5maWVsZFtkYXRhLXRlbXBsYXRlLWlkPSIgKyB0ZW1wbGF0ZUlkICsgIl0gLmFkZC1hdHRhY2ggLmZpbGUtaW5wdXQiOwoKICAgICAgICAgICAgICAgICAgICBpZiAoWycxMzAwMScsICcxNDAwMScsICcxNDAwMicsICcxMTAwMScsICcxNTAwMScsICcxNjAwMScsICcyNDAwMScsICcyMTAwMScsICdvcmRlciddLmluY2x1ZGVzKHRlbXBsYXRlSWQudG9TdHJpbmcoKSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2hlY2sgaWYgYSB1c2VyIGF0dGFjaGVkIG93biBmaWxlIG9yIG5vdAogICAgICAgICAgICAgICAgICAgICAgICBpZiAoJChhdHRhY2hlZEZpbGVTZWxlY3RvcikuaXMoIjp2aXNpYmxlIikpIHJldHVybjsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGxldCB0aWZmVXJsID0gIi9kb2N1bWVudC8iICsgc2VydmljZSArICIvdGlmZi10by1iYXNlNjQiICsKICAgICAgICAgICAgICAgICAgICAgICAgIj90ZW1wbGF0ZUlkPSIgKyB0ZW1wbGF0ZUlkICsgIiZkb2N1bWVudElkPSIgKyBkb2N1bWVudElkOwoKCiAgICAgICAgICAgICAgICAgICAgX3RoaXMubG9nZ2VyLmxvZygi0JTQvtCx0LDQstC70Y/QtdC8INGE0LDQudC7ICIgKyB0ZW1wbGF0ZUlkKTsKICAgICAgICAgICAgICAgICAgICBfdGhpcy5sb2dnZXIubG9nKCLQmtC+0L3QstC10YDRgtC40YDRg9C10LwgIiArIHRlbXBsYXRlSWQgKyAiINCyIFRJRkYiKTsKICAgICAgICAgICAgICAgICAgICAvLyBnZXQgdGhlIGZpbGUgaW4gdGlmZgoKICAgICAgICAgICAgICAgICAgICAkLmdldCh0aWZmVXJsKS5mYWlsKGZ1bmN0aW9uIChkYXRhKSB7CgogICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5sb2dnZXIubG9nKCLQntGI0LjQsdC60LAg0L/RgNC4INC60L7QvdCy0LXRgNGC0LDRhtC40Lgg0LIgVElGRiIpOwogICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5fZXJyb3JzLnB1c2godHJ1ZSk7CgogICAgICAgICAgICAgICAgICAgIH0pLmRvbmUoZnVuY3Rpb24gKGJhc2U2NGRhdGEpIHsKCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChiYXNlNjRkYXRhLmxlbmd0aCA9PT0gMCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuX2Vycm9ycy5wdXNoKHRydWUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMubG9nZ2VyLmxvZygi0J7RiNC40LHQutCwINC/0YDQuCDQutC+0L3QstC10YDRgtCw0YbQuNC4INCyIFRJRkYuINCf0YPRgdGC0L7QuSDQvtGC0LLQtdGCINGBINGB0LXRgNCy0LXRgNCwLiIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICBsZXQgcG9zdERhdGEgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudENvZGU6IGRvY0NvZGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50VHlwZTogMSwgLy8gdGlmZiA9PSAxCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiBiYXNlNjRkYXRhICAgLy9iYXNlNjQgZW5jb2RlZCB0aWZmCiAgICAgICAgICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgICAgICAgICBsZXQgb2sgPSBfdGhpcy5fZGVjb3JhdGVTdWNjZXNzSGFuZGxlcigKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIG9rKGRhdGEsIHN0YXR1cywgeGhyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuZmlsZXNbZGF0YS5maWxlXSA9IGJhc2U2NGRhdGE7IC8vIHNhdmUgaXQgZ2xvYmFsbHkgZm9yIGZ1dHVyZSB1c2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5sb2dnZXIubG9nKCLQpNCw0LnQuyAiICsgdGVtcGxhdGVJZCArICIg0YPRgdC/0LXRiNC90L4g0LTQvtCx0LDQstC70LXQvSDRgSDQmNCUIC0gIiArIGRhdGEuZmlsZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coImFkZEZpbGU6IGZpbGUgPSAiICsgZGF0YS5maWxlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5hZGRTaWduKGRhdGEuZmlsZSwgX3RoaXMuZmlsZXNbZGF0YS5maWxlXSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICk7CgoKICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuX2NhbldlQ29udGludWUoKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLl9yZXF1ZXN0KHVybCwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogIlBPU1QiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogSlNPTi5zdHJpbmdpZnkocG9zdERhdGEpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvY2Vzc0RhdGE6IGZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VjY2Vzczogb2sKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIGlmICgkKF90aGlzLmRvbS4kc2Vjb25kUGhhc2VEb2NzKS5sZW5ndGggPiAwKSB7CgogICAgICAgICAgICAgICAgICAgIF90aGlzLl9jYW5XZUNvbnRpbnVlKCk7CgogICAgICAgICAgICAgICAgICAgIC8vIGFkZCBzZWNvbmQgcGhhc2UgZG9jdW1lbnRzCiAgICAgICAgICAgICAgICAgICAgX3RoaXMubG9nZ2VyLmxvZygi0JTQvtCx0LDQstGP0LvQtdC8INC00L7QutGD0LzQtdC90Ysg0LTQu9GPINCy0YLQvtGA0L7QuSDRhNCw0LfRiyIpOwogICAgICAgICAgICAgICAgICAgICQuZWFjaChfdGhpcy5zZWNvbmRQaGFzZURvY3MsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHBvc3REYXRhID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnRDb2RlOiB0aGlzLmRvY3VtZW50Q29kZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IHRoaXMuY29udGVudCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnRUeXBlOiAxCiAgICAgICAgICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgICAgICAgICBsZXQgb2sgPSBfdGhpcy5fZGVjb3JhdGVTdWNjZXNzSGFuZGxlcigKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIG9rKGRhdGEsIHN0YXR1cywgeGhyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuZmlsZXNbZGF0YS5maWxlXSA9IHBvc3REYXRhLmNvbnRlbnQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMubG9nZ2VyLmxvZygi0JTQvtC60YPQvNC10L3RgiDQtNC+0LHQsNCy0LvQtdC9INGBINCY0JQgLSAiICsgZGF0YS5maWxlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygiYWRkRmlsZTogZmlsZSA9ICIgKyBkYXRhLmZpbGUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmFkZFNpZ24oZGF0YS5maWxlLCBfdGhpcy5maWxlc1tkYXRhLmZpbGVdKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLl9yZXF1ZXN0KHVybCwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogIlBPU1QiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogSlNPTi5zdHJpbmdpZnkocG9zdERhdGEpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvY2Vzc0RhdGE6IGZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VjY2Vzczogb2sKICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYgKF90aGlzLmF0dGFjaGVkT3JkZXJDbnQgPiAwKSB7CgogICAgICAgICAgICAgICAgICAgIF90aGlzLl9jYW5XZUNvbnRpbnVlKCk7CgogICAgICAgICAgICAgICAgICAgIC8vIGFkZCBzZWNvbmQgcGhhc2UgZG9jdW1lbnRzCiAgICAgICAgICAgICAgICAgICAgX3RoaXMubG9nZ2VyLmxvZygi0JTQvtCx0LDQstGP0LvQtdC8INCy0LDRiCDRg9GB0YLQsNCyIik7CiAgICAgICAgICAgICAgICAgICAgJC5lYWNoKF90aGlzLmF0dGFjaGVkT3JkZXIsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHBvc3REYXRhID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnRDb2RlOiB0aGlzLmRvY3VtZW50Q29kZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IHRoaXMuY29udGVudCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnRUeXBlOiAxCiAgICAgICAgICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgICAgICAgICBsZXQgb2sgPSBfdGhpcy5fZGVjb3JhdGVTdWNjZXNzSGFuZGxlcigKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIG9rKGRhdGEsIHN0YXR1cywgeGhyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuZmlsZXNbZGF0YS5maWxlXSA9IHBvc3REYXRhLmNvbnRlbnQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMubG9nZ2VyLmxvZygi0JTQvtC60YPQvNC10L3RgiDQtNC+0LHQsNCy0LvQtdC9INGBINCY0JQgLSAiICsgZGF0YS5maWxlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygiYWRkRmlsZTogZmlsZSA9ICIgKyBkYXRhLmZpbGUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmFkZFNpZ24oZGF0YS5maWxlLCBfdGhpcy5maWxlc1tkYXRhLmZpbGVdKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLl9yZXF1ZXN0KHVybCwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogIlBPU1QiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogSlNPTi5zdHJpbmdpZnkocG9zdERhdGEpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvY2Vzc0RhdGE6IGZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VjY2Vzczogb2sKICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYgKF90aGlzLmFkZGl0aW9uYWxEb2NzQ250ID4gMCkgewoKICAgICAgICAgICAgICAgICAgICBfdGhpcy5fY2FuV2VDb250aW51ZSgpOwoKICAgICAgICAgICAgICAgICAgICAvLyBhZGQgc2Vjb25kIHBoYXNlIGRvY3VtZW50cwogICAgICAgICAgICAgICAgICAgIF90aGlzLmxvZ2dlci5sb2coItCU0L7QsdCw0LLRj9C70LXQvCDQuNC90YvQtSDQtNC+0LrRg9C80LXQvdGC0YsiKTsKICAgICAgICAgICAgICAgICAgICAkLmVhY2goX3RoaXMuYWRkaXRpb25hbERvY3MsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHBvc3REYXRhID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnRDb2RlOiB0aGlzLmRvY3VtZW50Q29kZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IHRoaXMuY29udGVudCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnRUeXBlOiAxCiAgICAgICAgICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgICAgICAgICBsZXQgb2sgPSBfdGhpcy5fZGVjb3JhdGVTdWNjZXNzSGFuZGxlcigKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIG9rKGRhdGEsIHN0YXR1cywgeGhyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuZmlsZXNbZGF0YS5maWxlXSA9IHBvc3REYXRhLmNvbnRlbnQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMubG9nZ2VyLmxvZygi0JTQvtC60YPQvNC10L3RgiDQtNC+0LHQsNCy0LvQtdC9INGBINCY0JQgLSAiICsgZGF0YS5maWxlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygiYWRkRmlsZTogZmlsZSA9ICIgKyBkYXRhLmZpbGUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmFkZFNpZ24oZGF0YS5maWxlLCBfdGhpcy5maWxlc1tkYXRhLmZpbGVdKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLl9yZXF1ZXN0KHVybCwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogIlBPU1QiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogSlNPTi5zdHJpbmdpZnkocG9zdERhdGEpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvY2Vzc0RhdGE6IGZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VjY2Vzczogb2sKICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICB9CgoKICAgICAgICAgICAgfSk7CgogICAgICAgIH0KCiAgICAgICAgYWRkU2lnbihmaWxlSWQsIGNvbnRlbnQpIHsKICAgICAgICAgICAgbGV0IHVybCA9ICIvYWRkc2lnbiIsCiAgICAgICAgICAgICAgICB0aHVtYnByaW50ID0gJCgiI2NlcnRpZmljYXRlcyIpLnZhbCgpOwoKICAgICAgICAgICAgbGV0IF90aGlzID0gdGhpczsKCiAgICAgICAgICAgIHRoaXMuX2NhbldlQ29udGludWUoKTsKCgogICAgICAgICAgICBfdGhpcy5sb2dnZXIubG9nKCLQn9C+0LTQv9C40YHRi9Cy0LDQtdC8INC00L7QutGD0LzQtdC90YIg0YEg0JjQlCAtICIgKyBmaWxlSWQpOwogICAgICAgICAgICB0aGlzLnBsdWdpbi5zaWduRGF0YShjb250ZW50LCB0aHVtYnByaW50KS50aGVuKAogICAgICAgICAgICAgICAgLy8gc3VjY2Vzc2Z1bGx5IHNpZ25lZCBkYXRhCiAgICAgICAgICAgICAgICBmdW5jdGlvbiAoc2lnbmVkRGF0YSkgewogICAgICAgICAgICAgICAgICAgIGxldCBwb3N0RGF0YSA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgZmlsZUlkOiBmaWxlSWQsCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IHNpZ25lZERhdGEsCiAgICAgICAgICAgICAgICAgICAgICAgIHN1ck5hbWU6IF90aGlzLl9zdXJOYW1lLAogICAgICAgICAgICAgICAgICAgICAgICBmaXJzdE5hbWU6IF90aGlzLl9maXJzdE5hbWUKICAgICAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBvayhkYXRhLCBzdGF0dXMsIHhocikgewogICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygiYWRkU2lnbjogcGFja2FnZSA9ICIgKyBkYXRhLnBhY2thZ2UgKyAiIGZpbGVJZCA9ICIgKyBmaWxlSWQpOwogICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5sb2dnZXIubG9nKCLQlNC+0LrRg9C80LXQvdGCINGBINCY0JQgIiArIGZpbGVJZCArICIg0YPRgdC/0LXRiNC90L4g0L/QvtC00L/QuNGB0LDQvSIpOwoKICAgICAgICAgICAgICAgICAgICAgICAgLy8gYmVjYXVzZSBvZiBhc3luYyBjb2RlIHdlIG5lZWQgYSBjb3VudGVyIGluZGljYXRpbmcgd2hlbiB3ZSBzaG91bGQgZ28gdGhlIG5leHQgcGhhc2UKICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMucHJvY2Nlc3NlZEZpbGVzQ250ICs9IDE7CgogICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGVyZSB3ZSBhcmUgZ29pbmcgdG8gaW52ZW50b3J5IHBoYXNlCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfdGhpcy5wcm9jY2Vzc2VkRmlsZXNDbnQgPT09IF90aGlzLmZpbGVzQ250KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5jcmVhdGVJbnYoKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhlcmUgd2UgYXJlIGdvaW5nIHRvIHBhY2thZ2Ugc2F2aW5nIHBoYXNlCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfdGhpcy5wcm9jY2Vzc2VkRmlsZXNDbnQgPiBfdGhpcy5maWxlc0NudCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuc2F2ZVBhY2thZ2UoKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgX3RoaXMuX3JlcXVlc3QodXJsLCB7CiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICJQT1NUIiwKICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogSlNPTi5zdHJpbmdpZnkocG9zdERhdGEpLAogICAgICAgICAgICAgICAgICAgICAgICBwcm9jZXNzRGF0YTogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IG9rCiAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIC8vIHNvbWV0aGluZyBnb2VzIHdyb25nIGR1cmluZyBzaWduaW5nCiAgICAgICAgICAgICAgICBmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgICAgICAgICAgICBfdGhpcy5fZXJyb3JzLnB1c2godHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coImFkZFNpZ246IGVycm9yIG9jY3VycmVkID0gIiArIGVycm9yKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgKTsKCiAgICAgICAgfQoKICAgICAgICBjcmVhdGVJbnYoKSB7CiAgICAgICAgICAgIGxldCB1cmwgPSAiL2NyZWF0ZWludiI7CgogICAgICAgICAgICBsZXQgX3RoaXMgPSB0aGlzOwoKICAgICAgICAgICAgX3RoaXMubG9nZ2VyLmxvZygi0KHQvtC30LTQsNC10Lwg0YTQsNC50Lsg0LjQvdCy0LXQvdGC0LDRgNGPINC00LvRjyDQutC+0L3RgtC10LnQvdC10YDQsCIpOwoKICAgICAgICAgICAgbGV0IG9rID0gX3RoaXMuX2RlY29yYXRlU3VjY2Vzc0hhbmRsZXIoCiAgICAgICAgICAgICAgICBmdW5jdGlvbiBvayhkYXRhLCBzdGF0dXMsIHhocikgewogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJjcmVhdGVJbnY6IGludmVudG9yeUZpbGVJZCA9ICIgKyBkYXRhLmludmVudG9yeUZpbGVJZCk7CiAgICAgICAgICAgICAgICAgICAgX3RoaXMubG9nZ2VyLmxvZygi0KTQsNC50Lsg0LjQvdCy0LXQvdGC0LDRgNGPINGD0YHQv9C10YjQvdC+INGB0L7Qt9C00LDQvSIpOwogICAgICAgICAgICAgICAgICAgIF90aGlzLmFkZFNpZ24oZGF0YS5pbnZlbnRvcnlGaWxlSWQsIGRhdGEuaW52ZW50b3J5KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgKTsKCiAgICAgICAgICAgIF90aGlzLl9jYW5XZUNvbnRpbnVlKCk7CgogICAgICAgICAgICBfdGhpcy5fcmVxdWVzdCh1cmwsIHsKICAgICAgICAgICAgICAgIHR5cGU6ICJQT1NUIiwKICAgICAgICAgICAgICAgIGRhdGE6IEpTT04uc3RyaW5naWZ5KHt9KSwKICAgICAgICAgICAgICAgIHByb2Nlc3NEYXRhOiBmYWxzZSwKICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IG9rCiAgICAgICAgICAgIH0pOwoKICAgICAgICB9OwoKICAgICAgICBzYXZlUGFja2FnZSgpIHsKICAgICAgICAgICAgbGV0IHVybCA9ICIvc2F2ZSI7CgogICAgICAgICAgICBsZXQgX3RoaXMgPSB0aGlzOwoKICAgICAgICAgICAgX3RoaXMubG9nZ2VyLmxvZygi0KHQvtGF0YDQsNC90Y/QtdC8INC60L7QvdGC0LXQudC90LXRgCDQvdCwINC00LjRgdC6Iik7CgogICAgICAgICAgICBsZXQgb2sgPSBfdGhpcy5fZGVjb3JhdGVTdWNjZXNzSGFuZGxlcigKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIG9rKGRhdGEsIHN0YXR1cywgeGhyKSB7CiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coInNhdmU6IHBhY2thZ2VPblRoZURpc2sgPSAiICsgZGF0YS5wYWNrYWdlT25UaGVEaXNrKTsKICAgICAgICAgICAgICAgICAgICBfdGhpcy5sb2dnZXIubG9nKCLQmtC+0L3RgtC10LnQvdC10YAg0YPRgdC/0LXRiNC90L4g0YHQvtGF0YDQsNC90LXQvSDQvdCwINC00LjRgdC60LUiKTsKICAgICAgICAgICAgICAgICAgICBfdGhpcy5zZW5kUGFja2FnZShkYXRhLnBhY2thZ2VPblRoZURpc2spOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICApOwoKCiAgICAgICAgICAgIF90aGlzLl9jYW5XZUNvbnRpbnVlKCk7CgogICAgICAgICAgICBfdGhpcy5fcmVxdWVzdCh1cmwsIHsKICAgICAgICAgICAgICAgIHR5cGU6ICJQT1NUIiwKICAgICAgICAgICAgICAgIGRhdGE6IEpTT04uc3RyaW5naWZ5KHt9KSwKICAgICAgICAgICAgICAgIHByb2Nlc3NEYXRhOiBmYWxzZSwKICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IG9rCiAgICAgICAgICAgIH0pOwogICAgICAgIH07CgogICAgICAgIHNlbmRQYWNrYWdlKGNvbnRhaW5lck5hbWUpIHsKICAgICAgICAgICAgbGV0IHVybCA9ICIvc2VuZD9jb250YWluZXJOYW1lPSIgKyBjb250YWluZXJOYW1lOwogICAgICAgICAgICBsZXQgX3RoaXMgPSB0aGlzOwoKCiAgICAgICAgICAgIGxldCBvayA9IF90aGlzLl9kZWNvcmF0ZVN1Y2Nlc3NIYW5kbGVyKAogICAgICAgICAgICAgICAgZnVuY3Rpb24gb2soZGF0YSwgc3RhdHVzLCB4aHIpIHsKICAgICAgICAgICAgICAgICAgICBfdGhpcy5fc2V0Q29udGFpbmVyQ29tcGxldGUoKS5kb25lKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdfc2V0Q29udGFpbmVyQ29tcGxldGU6ICcgKyBkYXRhKTsKICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMubG9nZ2VyLmxvZygi0KTQvtGA0LzQuNGA0L7QstCw0L3QuNC1INC60L7QvdGC0LXQudC90LXRgNCwINGD0YHQv9C10YjQvdC+INC30LDQstC10YDRiNC10L3QviIpOwoKICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coInNlbmQ6IGNvbnRhaW5lciBpcyBzZW50Iik7CiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmxvZ2dlci5sb2coItCa0L7QvdGC0LXQudC90LXRgCDRg9GB0L/QtdGI0L3QviDQvtGC0L/RgNCw0LLQu9C10L0g0LIg0L3QsNC70L7Qs9C+0LLRg9GOIik7CgogICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cub25iZWZvcmV1bmxvYWQgPSBudWxsOwoKICAgICAgICAgICAgICAgICAgICB9KS5mYWlsKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLl9lcnJvcnMucHVzaCh0cnVlKTsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ19zZXRDb250YWluZXJDb21wbGV0ZTogJyArIGRhdGEpOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICApOwoKICAgICAgICAgICAgaWYgKF90aGlzLmRlYnVnTW9kZSkgewogICAgICAgICAgICAgICAgX3RoaXMuY29uc29sZUxvZ2dlci5kZWJ1ZygiISEhIERFQlVHIE1PREUgSVMgT04gISEhIEFjdHVhbGx5IGNvbnRhaW5lciB3b250J3QgYmUgc2VuZCIpOwogICAgICAgICAgICAgICAgdXJsICs9ICImZGVidWc9dHJ1ZSI7CiAgICAgICAgICAgICAgICBfdGhpcy5jb25zb2xlTG9nZ2VyLmRlYnVnKCJzZW5kIHVybCBpcyBzZXQgdG8gPT0+IiArIHVybCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIF90aGlzLl9jYW5XZUNvbnRpbnVlKCk7CgoKICAgICAgICAgICAgX3RoaXMubG9nZ2VyLmxvZygi0J7RgtC/0YDQsNCy0LvRj9C10Lwg0LrQvtC90YLQtdC50L3QtdGAINCyINC90LDQu9C+0LPQvtCy0YPRjiIpOwogICAgICAgICAgICBfdGhpcy5fcmVxdWVzdCh1cmwsIHsKICAgICAgICAgICAgICAgIHR5cGU6ICJHRVQiLAogICAgICAgICAgICAgICAgcHJvY2Vzc0RhdGE6IGZhbHNlLAogICAgICAgICAgICAgICAgc3VjY2Vzczogb2sKICAgICAgICAgICAgfSk7CiAgICAgICAgfQogICAgfQoKICAgIGxldCBjb21wb25lbnRzQ291bnQgPSAkKCIuc2lnbi1jb21wb25lbnQiKS5sZW5ndGg7CiAgICBsZXQgY29tcGxldGVPblNlbmQgPSBmYWxzZTsKCiAgICAkKCIuc2lnbi1jb21wb25lbnQiKS5lYWNoKGZ1bmN0aW9uIChpbmRleCkgewogICAgICAgIGxldCBjb21wb25lbnRJZCA9ICQodGhpcykuZGF0YSgiY29tcG9uZW50LWlkIiksCiAgICAgICAgICAgIHNjb3BlID0gIiNzaWduLWNvbXBvbmVudC0iICsgY29tcG9uZW50SWQ7CgogICAgICAgIGlmIChjb21wb25lbnRzQ291bnQgPT09IGluZGV4ICsgMSkgY29tcGxldGVPblNlbmQgPSB0cnVlOwoKICAgICAgICBuZXcgQ29udGFpbmVyQXBpKHNjb3BlLCBwbHVnaW4sIGNvbXBsZXRlT25TZW5kKTsKICAgIH0pOwoKCiAgICAkKCIuYXR0YWNoLWZvcm0iKS5lYWNoKGZ1bmN0aW9uICgpIHsKICAgICAgICBsZXQgc2NvcGVyID0gJCh0aGlzKS5wYXJlbnRzKCcuZmllbGQnKS5kYXRhKCd0ZW1wbGF0ZS1pZCcpOwogICAgICAgIG5ldyBGaWxlSW5wdXQoJy5hdHRhY2gtZm9ybScsICcuZmllbGRbZGF0YS10ZW1wbGF0ZS1pZD0nICsgc2NvcGVyICsgJ10gLmZpZWxkX19jb250cm9sJywgc2NvcGVyKTsKICAgIH0pOwoKCgp9KTsKCgo=</text>
      </register>
      <register name="7" type="2">
        <text encoding="base64">Cg==</text>
      </register>
      <register name="8" type="2">
        <text encoding="base64">c2V0IG11bHRpcGxlLWN1cnNvcnMK</text>
      </register>
      <register name="y" type="4">
        <text>url + &quot;?containerName=&quot; + containerName + _debugUrl</text>
      </register>
      <register name="9" type="2">
        <text encoding="base64">c2V0IHN1cnJvbmQK</text>
      </register>
      <register name=":" type="4">
        <text>w</text>
      </register>
    </registers>
    <search>
      <last-search>VERSION</last-search>
      <last-offset />
      <last-pattern>VERSION</last-pattern>
      <last-replace />
      <last-substitute>certToCheck\.</last-substitute>
      <last-dir>1</last-dir>
      <show-last>true</show-last>
    </search>
    <history>
      <history-search>
        <entry encoding="base64">XDwoXD4=</entry>
        <entry>uploadSeconfd</entry>
        <entry>upload.*Second</entry>
        <entry>upload*Second</entry>
        <entry>upload</entry>
        <entry>\.*Second</entry>
        <entry>IsPresent</entry>
        <entry>certToCheck</entry>
        <entry>certToCheck\.</entry>
        <entry encoding="base64">XDxLZXlVc2FnZVw+</entry>
        <entry>_getCert</entry>
        <entry>check</entry>
        <entry>^check</entry>
        <entry>check\(</entry>
        <entry>oStore.Close()</entry>
        <entry>addSign</entry>
        <entry>signData</entry>
        <entry>finally</entry>
        <entry>catch</entry>
        <entry>check(</entry>
        <entry encoding="base64">XDxzdG9yZUNlcnRzXD4=</entry>
        <entry>oSigner</entry>
        <entry encoding="base64">XDxvU2lnbmVyXD4=</entry>
        <entry encoding="base64">XDxzdG9yZUNlcnN0Q250XD4=</entry>
        <entry encoding="base64">XDxMb2NhdGlvblw+</entry>
        <entry encoding="base64">XDwpXD4=</entry>
        <entry>oStore</entry>
        <entry>Alert</entry>
        <entry encoding="base64">XDxBbGVydFw+</entry>
        <entry>ContainerApi</entry>
        <entry encoding="base64">XDxmdWxsbmFtZVw+</entry>
        <entry encoding="base64">XDx0YXhDb2RlXD4=</entry>
        <entry encoding="base64">XDxkb21cPg==</entry>
        <entry>VERSION</entry>
      </history-search>
      <history-cmd>
        <entry>help g</entry>
        <entry>tabclose</entry>
        <entry>bd</entry>
        <entry encoding="base64">JzwsJz4vY2VydFRvQ2hlY2svLw==</entry>
        <entry encoding="base64">JzwsJz4lcy9jZXJ0VG9DaGVjay8v</entry>
        <entry encoding="base64">JzwsJz54L2NlcnRUb0NoZWNrXC4=</entry>
        <entry encoding="base64">JzwsJz5zL2NlcnRUb0NoZWNrXC4vLw==</entry>
        <entry encoding="base64">JzwsJz5zL2NlcnRUb0NoZWNrXC4vL2c=</entry>
        <entry>e $MYVIMRC</entry>
        <entry>Ex .</entry>
        <entry>new</entry>
        <entry>bn</entry>
        <entry>buffers</entry>
        <entry>touch ~/.ideavimrc</entry>
        <entry>tabnew</entry>
        <entry>set history=100</entry>
        <entry>set mutiple-cursors</entry>
        <entry>set nu</entry>
        <entry>set !nu</entry>
        <entry>set vb</entry>
        <entry>set incsearch</entry>
        <entry>set incsearch=on</entry>
        <entry>set is=on</entry>
        <entry>q</entry>
        <entry>changes</entry>
        <entry>set hlsearch</entry>
        <entry>set nohlseach</entry>
        <entry>source ~/.ideavimrc</entry>
        <entry>e ~/.ideavimrc</entry>
        <entry>source %</entry>
        <entry>vsplit</entry>
        <entry>e</entry>
        <entry>W</entry>
        <entry>split</entry>
        <entry>w</entry>
      </history-cmd>
      <history-expr />
      <history-input />
    </history>
    <shortcut-conflicts>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed O</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed P</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed E</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed F</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed V</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed R</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed H</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed M</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed N</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed D</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed T</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed I</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed G</text>
      </shortcut-conflict>
    </shortcut-conflicts>
    <editor>
      <key-repeat enabled="true" />
    </editor>
  </component>
</application>